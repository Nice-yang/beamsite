(this.webpackJsonpbeamfield=this.webpackJsonpbeamfield||[]).push([[10],{1111:function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},1112:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{player:(0,n.default)(e.player,t),operation:(0,i.default)(e.operation,t)}},t.operationReducer=t.playerReducer=void 0;var n=a(r(1551)),i=a(r(1552));var o=n.default;t.playerReducer=o;var s=i.default;t.operationReducer=s},1113:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(796)),i=a(r(797)),o=new(function(){function e(){(0,n.default)(this,e)}return(0,i.default)(e,[{key:"request",value:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"exit",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"addEventListener",value:function(e){document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e)}},{key:"removeEventListener",value:function(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},{key:"isFullscreen",get:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}},{key:"enabled",get:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}}]),e}());t.default=o},1114:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p={actions:c.default.object,player:c.default.object,position:c.default.string,className:c.default.string},v=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(){this.props.actions.play()}},{key:"render",value:function(){var e=this.props,t=e.player,r=e.position;return f.default.createElement("button",{className:(0,h.default)("video-react-big-play-button","video-react-big-play-button-".concat(r),this.props.className,{"big-play-button-hide":t.hasStarted||!t.currentSrc}),type:"button","aria-live":"polite",tabIndex:"0",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},"Play Video"))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.defaultProps={position:"left"},v.displayName="BigPlayButton"},1115:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s={player:n.default.object,className:n.default.string};function l(e){var t=e.player,r=e.className;return t.error?null:i.default.createElement("div",{className:(0,o.default)("video-react-loading-spinner",r)})}l.propTypes=s,l.displayName="LoadingSpinner"},1116:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s={poster:n.default.string,player:n.default.object,actions:n.default.object,className:n.default.string};function l(e){var t=e.poster,r=e.player,a=e.actions,n=e.className;return!t||r.hasStarted?null:i.default.createElement("div",{className:(0,o.default)("video-react-poster",n),style:{backgroundImage:'url("'.concat(t,'")')},onClick:function(){r.paused&&a.play()}})}l.propTypes=s,l.displayName="PosterImage";var u=l;t.default=u},1117:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(857)),o=n(r(796)),s=n(r(797)),l=n(r(802)),u=n(r(804)),d=n(r(803)),c=n(r(805)),f=n(r(1)),h=a(r(0)),p=n(r(3)),v=r(843),g={actions:f.default.object,player:f.default.object,children:f.default.any,startTime:f.default.number,loop:f.default.bool,muted:f.default.bool,autoPlay:f.default.bool,playsInline:f.default.bool,src:f.default.string,poster:f.default.string,className:f.default.string,preload:f.default.oneOf(["auto","metadata","none"]),crossOrigin:f.default.string,onLoadStart:f.default.func,onWaiting:f.default.func,onCanPlay:f.default.func,onCanPlayThrough:f.default.func,onPlaying:f.default.func,onEnded:f.default.func,onSeeking:f.default.func,onSeeked:f.default.func,onPlay:f.default.func,onPause:f.default.func,onProgress:f.default.func,onDurationChange:f.default.func,onError:f.default.func,onSuspend:f.default.func,onAbort:f.default.func,onEmptied:f.default.func,onStalled:f.default.func,onLoadedMetadata:f.default.func,onLoadedData:f.default.func,onTimeUpdate:f.default.func,onRateChange:f.default.func,onVolumeChange:f.default.func,onResize:f.default.func},y=function(e){function t(e){var r;return(0,o.default)(this,t),(r=(0,l.default)(this,(0,u.default)(t).call(this,e))).video=null,r.play=r.play.bind((0,d.default)(r)),r.pause=r.pause.bind((0,d.default)(r)),r.seek=r.seek.bind((0,d.default)(r)),r.forward=r.forward.bind((0,d.default)(r)),r.replay=r.replay.bind((0,d.default)(r)),r.toggleFullscreen=r.toggleFullscreen.bind((0,d.default)(r)),r.getProperties=r.getProperties.bind((0,d.default)(r)),r.renderChildren=r.renderChildren.bind((0,d.default)(r)),r.handleLoadStart=r.handleLoadStart.bind((0,d.default)(r)),r.handleCanPlay=r.handleCanPlay.bind((0,d.default)(r)),r.handleCanPlayThrough=r.handleCanPlayThrough.bind((0,d.default)(r)),r.handlePlay=r.handlePlay.bind((0,d.default)(r)),r.handlePlaying=r.handlePlaying.bind((0,d.default)(r)),r.handlePause=r.handlePause.bind((0,d.default)(r)),r.handleEnded=r.handleEnded.bind((0,d.default)(r)),r.handleWaiting=r.handleWaiting.bind((0,d.default)(r)),r.handleSeeking=r.handleSeeking.bind((0,d.default)(r)),r.handleSeeked=r.handleSeeked.bind((0,d.default)(r)),r.handleFullscreenChange=r.handleFullscreenChange.bind((0,d.default)(r)),r.handleError=r.handleError.bind((0,d.default)(r)),r.handleSuspend=r.handleSuspend.bind((0,d.default)(r)),r.handleAbort=r.handleAbort.bind((0,d.default)(r)),r.handleEmptied=r.handleEmptied.bind((0,d.default)(r)),r.handleStalled=r.handleStalled.bind((0,d.default)(r)),r.handleLoadedMetaData=r.handleLoadedMetaData.bind((0,d.default)(r)),r.handleLoadedData=r.handleLoadedData.bind((0,d.default)(r)),r.handleTimeUpdate=r.handleTimeUpdate.bind((0,d.default)(r)),r.handleRateChange=r.handleRateChange.bind((0,d.default)(r)),r.handleVolumeChange=r.handleVolumeChange.bind((0,d.default)(r)),r.handleDurationChange=r.handleDurationChange.bind((0,d.default)(r)),r.handleProgress=(0,v.throttle)(r.handleProgress.bind((0,d.default)(r)),250),r.handleKeypress=r.handleKeypress.bind((0,d.default)(r)),r.handleTextTrackChange=r.handleTextTrackChange.bind((0,d.default)(r)),r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.forceUpdate(),this.video&&this.video.textTracks&&(this.video.textTracks.onaddtrack=this.handleTextTrackChange,this.video.textTracks.onremovetrack=this.handleTextTrackChange)}},{key:"getProperties",value:function(){var e=this;return this.video?v.mediaProperties.reduce((function(t,r){return t[r]=e.video[r],t}),{}):null}},{key:"handleTextTrackChange",value:function(){var e=this.props,t=e.actions,r=e.player;if(this.video&&this.video.textTracks){var a=Array.from(this.video.textTracks).find((function(e){return"showing"===e.mode}));a!==r.activeTextTrack&&t.activateTextTrack(a)}}},{key:"play",value:function(){var e=this.video.play();void 0!==e&&e.catch((function(){})).then((function(){}))}},{key:"pause",value:function(){var e=this.video.pause();void 0!==e&&e.catch((function(){})).then((function(){}))}},{key:"load",value:function(){this.video.load()}},{key:"addTextTrack",value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:"canPlayType",value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:"togglePlay",value:function(){this.video.paused?this.play():this.pause()}},{key:"seek",value:function(e){try{this.video.currentTime=e}catch(t){}}},{key:"forward",value:function(e){this.seek(this.video.currentTime+e)}},{key:"replay",value:function(e){this.forward(-e)}},{key:"toggleFullscreen",value:function(){var e=this.props,t=e.player;e.actions.toggleFullscreen(t)}},{key:"handleLoadStart",value:function(){var e=this.props,t=e.actions,r=e.onLoadStart;t.handleLoadStart(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleCanPlay",value:function(){var e=this.props,t=e.actions,r=e.onCanPlay;t.handleCanPlay(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleCanPlayThrough",value:function(){var e=this.props,t=e.actions,r=e.onCanPlayThrough;t.handleCanPlayThrough(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handlePlaying",value:function(){var e=this.props,t=e.actions,r=e.onPlaying;t.handlePlaying(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handlePlay",value:function(){var e=this.props,t=e.actions,r=e.onPlay;t.handlePlay(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handlePause",value:function(){var e=this.props,t=e.actions,r=e.onPause;t.handlePause(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleDurationChange",value:function(){var e=this.props,t=e.actions,r=e.onDurationChange;t.handleDurationChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleProgress",value:function(){var e=this.props,t=e.actions,r=e.onProgress;this.video&&t.handleProgressChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleEnded",value:function(){var e=this.props,t=e.loop,r=e.player,a=e.actions,n=e.onEnded;t?(this.seek(0),this.play()):r.paused||this.pause(),a.handleEnd(this.getProperties()),n&&n.apply(void 0,arguments)}},{key:"handleWaiting",value:function(){var e=this.props,t=e.actions,r=e.onWaiting;t.handleWaiting(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleSeeking",value:function(){var e=this.props,t=e.actions,r=e.onSeeking;t.handleSeeking(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleSeeked",value:function(){var e=this.props,t=e.actions,r=e.onSeeked;t.handleSeeked(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleFullscreenChange",value:function(){}},{key:"handleSuspend",value:function(){var e=this.props,t=e.actions,r=e.onSuspend;t.handleSuspend(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleAbort",value:function(){var e=this.props,t=e.actions,r=e.onAbort;t.handleAbort(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleEmptied",value:function(){var e=this.props,t=e.actions,r=e.onEmptied;t.handleEmptied(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleStalled",value:function(){var e=this.props,t=e.actions,r=e.onStalled;t.handleStalled(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleLoadedMetaData",value:function(){var e=this.props,t=e.actions,r=e.onLoadedMetadata,a=e.startTime;a&&a>0&&(this.video.currentTime=a),t.handleLoadedMetaData(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleLoadedData",value:function(){var e=this.props,t=e.actions,r=e.onLoadedData;t.handleLoadedData(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleTimeUpdate",value:function(){var e=this.props,t=e.actions,r=e.onTimeUpdate;t.handleTimeUpdate(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleRateChange",value:function(){var e=this.props,t=e.actions,r=e.onRateChange;t.handleRateChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleVolumeChange",value:function(){var e=this.props,t=e.actions,r=e.onVolumeChange;t.handleVolumeChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleError",value:function(){var e=this.props,t=e.actions,r=e.onError;t.handleError(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleResize",value:function(){var e=this.props,t=e.actions,r=e.onResize;t.handleResize(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleKeypress",value:function(){}},{key:"renderChildren",value:function(){var e=this,t=(0,i.default)({},this.props,{video:this.video});return this.video?h.default.Children.toArray(this.props.children).filter(v.isVideoChild).map((function(r){var a;if("string"===typeof r.type){if("source"===r.type){var n=(a=(0,i.default)({},r.props)).onError;a.onError=function(){n&&n.apply(void 0,arguments),e.handleError.apply(e,arguments)}}}else a=t;return h.default.cloneElement(r,a)})):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.loop,a=t.poster,n=t.preload,i=t.src,o=t.autoPlay,s=t.playsInline,l=t.muted,u=t.crossOrigin,d=t.videoId;return h.default.createElement("video",{className:(0,p.default)("video-react-video",this.props.className),id:d,crossOrigin:u,ref:function(t){e.video=t},muted:l,preload:n,loop:r,playsInline:s,autoPlay:o,poster:a,src:i,onLoadStart:this.handleLoadStart,onWaiting:this.handleWaiting,onCanPlay:this.handleCanPlay,onCanPlayThrough:this.handleCanPlayThrough,onPlaying:this.handlePlaying,onEnded:this.handleEnded,onSeeking:this.handleSeeking,onSeeked:this.handleSeeked,onPlay:this.handlePlay,onPause:this.handlePause,onProgress:this.handleProgress,onDurationChange:this.handleDurationChange,onError:this.handleError,onSuspend:this.handleSuspend,onAbort:this.handleAbort,onEmptied:this.handleEmptied,onStalled:this.handleStalled,onLoadedMetadata:this.handleLoadedMetaData,onLoadedData:this.handleLoadedData,onTimeUpdate:this.handleTimeUpdate,onRateChange:this.handleRateChange,onVolumeChange:this.handleVolumeChange,tabIndex:"-1"},this.renderChildren())}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){e>1&&(e=1),e<0&&(e=0),this.video.volume=e}},{key:"videoWidth",get:function(){return this.video.videoWidth}},{key:"videoHeight",get:function(){return this.video.videoHeight}}]),t}(h.Component);t.default=y,y.propTypes=g,y.displayName="Video"},1118:function(e,t,r){var a=r(1553),n=r(1554),i=r(1555),o=r(1556);e.exports=function(e){return a(e)||n(e)||i(e)||o()}},1119:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}},1120:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p={manager:c.default.object,className:c.default.string},v=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).timer=null,e.manager.subscribeToOperationStateChange(a.handleStateChange.bind((0,u.default)(a))),a.state={hidden:!0,operation:{}},a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"handleStateChange",value:function(e,t){var r=this;e.count!==t.count&&"shortcut"===e.operation.source&&(this.timer&&(clearTimeout(this.timer),this.timer=null),this.setState({hidden:!1,count:e.count,operation:e.operation}),this.timer=setTimeout((function(){r.setState({hidden:!0}),r.timer=null}),500))}},{key:"render",value:function(){if("shortcut"!==this.state.operation.source)return null;var e=this.state.hidden?{display:"none"}:null;return f.default.createElement("div",{className:(0,h.default)({"video-react-bezel":!0,"video-react-bezel-animation":this.state.count%2===0,"video-react-bezel-animation-alt":this.state.count%2===1},this.props.className),style:e,role:"status","aria-label":this.state.operation.action},f.default.createElement("div",{className:(0,h.default)("video-react-bezel-icon","video-react-bezel-icon-".concat(this.state.operation.action))}))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="Bezel"},1121:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(994)),i=a(r(1118)),o=a(r(796)),s=a(r(797)),l=a(r(802)),u=a(r(804)),d=a(r(803)),c=a(r(805)),f=r(0),h=a(r(1)),p=r(942),v={clickable:h.default.bool,dblclickable:h.default.bool,manager:h.default.object,actions:h.default.object,player:h.default.object,shortcuts:h.default.array},g=function(e){function t(e,r){var a;return(0,o.default)(this,t),(a=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).defaultShortcuts=[{keyCode:32,handle:a.togglePlay},{keyCode:75,handle:a.togglePlay},{keyCode:70,handle:a.toggleFullscreen},{keyCode:37,handle:function(e,t){e.hasStarted&&t.replay(5,{action:"replay-5",source:"shortcut"})}},{keyCode:74,handle:function(e,t){e.hasStarted&&t.replay(10,{action:"replay-10",source:"shortcut"})}},{keyCode:39,handle:function(e,t){e.hasStarted&&t.forward(5,{action:"forward-5",source:"shortcut"})}},{keyCode:76,handle:function(e,t){e.hasStarted&&t.forward(10,{action:"forward-10",source:"shortcut"})}},{keyCode:36,handle:function(e,t){e.hasStarted&&t.seek(0)}},{keyCode:35,handle:function(e,t){e.hasStarted&&t.seek(e.duration)}},{keyCode:38,handle:function(e,t){var r=e.volume+.05;r>1&&(r=1),t.changeVolume(r,{action:"volume-up",source:"shortcut"})}},{keyCode:40,handle:function(e,t){var r=e.volume-.05;r<0&&(r=0);var a=r>0?"volume-down":"volume-off";t.changeVolume(r,{action:a,source:"shortcut"})}},{keyCode:190,shift:!0,handle:function(e,t){var r=e.playbackRate;r>=1.5?r=2:r>=1.25?r=1.5:r>=1?r=1.25:r>=.5?r=1:r>=.25?r=.5:r>=0&&(r=.25),t.changeRate(r,{action:"fast-forward",source:"shortcut"})}},{keyCode:188,shift:!0,handle:function(e,t){var r=e.playbackRate;r<=.5?r=.25:r<=1?r=.5:r<=1.25?r=1:r<=1.5?r=1.25:r<=2&&(r=1.5),t.changeRate(r,{action:"fast-rewind",source:"shortcut"})}}],a.shortcuts=(0,i.default)(a.defaultShortcuts),a.mergeShortcuts=a.mergeShortcuts.bind((0,d.default)(a)),a.handleKeyPress=a.handleKeyPress.bind((0,d.default)(a)),a.handleClick=a.handleClick.bind((0,d.default)(a)),a.handleDoubleClick=a.handleDoubleClick.bind((0,d.default)(a)),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.mergeShortcuts(),document.addEventListener("keydown",this.handleKeyPress),document.addEventListener("click",this.handleClick),document.addEventListener("dblclick",this.handleDoubleClick)}},{key:"componentDidUpdate",value:function(e){e.shortcuts!==this.props.shortcuts&&this.mergeShortcuts()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress),document.removeEventListener("click",this.handleClick),document.removeEventListener("dblclick",this.handleDoubleClick)}},{key:"mergeShortcuts",value:function(){var e=function(e){var t=e.keyCode,r=void 0===t?0:t,a=e.ctrl,n=void 0!==a&&a,i=e.shift,o=void 0!==i&&i,s=e.alt,l=void 0!==s&&s;return"".concat(r,":").concat(n,":").concat(o,":").concat(l)},t=this.defaultShortcuts.reduce((function(t,r){return Object.assign(t,(0,n.default)({},e(r),r))}),{}),r=(this.props.shortcuts||[]).reduce((function(t,r){var a=r.keyCode,i=r.handle;return a&&"function"===typeof i?Object.assign(t,(0,n.default)({},e(r),r)):t}),t),a=function(e){var t=0;return["ctrl","shift","alt"].forEach((function(r){e[r]&&t++})),t};this.shortcuts=Object.keys(r).map((function(e){return r[e]})).sort((function(e,t){return a(t)-a(e)}))}},{key:"togglePlay",value:function(e,t){e.paused?t.play({action:"play",source:"shortcut"}):t.pause({action:"pause",source:"shortcut"})}},{key:"toggleFullscreen",value:function(e,t){t.toggleFullscreen(e)}},{key:"handleKeyPress",value:function(e){var t=this.props,r=t.player,a=t.actions;if(r.isActive&&(!document.activeElement||!((0,p.hasClass)(document.activeElement,"video-react-control")||(0,p.hasClass)(document.activeElement,"video-react-menu-button-active")||(0,p.hasClass)(document.activeElement,"video-react-big-play-button")))){var n=e.keyCode||e.which,i=e.ctrlKey||e.metaKey,o=e.shiftKey,s=e.altKey,l=this.shortcuts.filter((function(e){return!(!e.keyCode||e.keyCode-n!==0)&&!(void 0!==e.ctrl&&e.ctrl!==i||void 0!==e.shift&&e.shift!==o||void 0!==e.alt&&e.alt!==s)}))[0];l&&(l.handle(r,a),e.preventDefault())}}},{key:"canBeClicked",value:function(e,t){return!(!e.isActive||"VIDEO"!==t.target.nodeName||4!==e.readyState)}},{key:"handleClick",value:function(e){var t=this.props,r=t.player,a=t.actions,n=t.clickable;this.canBeClicked(r,e)&&n&&this.togglePlay(r,a)}},{key:"handleDoubleClick",value:function(e){var t=this.props,r=t.player,a=t.actions,n=t.dblclickable;this.canBeClicked(r,e)&&n&&this.toggleFullscreen(r,a)}},{key:"render",value:function(){return null}}]),t}(f.Component);t.default=g,g.propTypes=v,g.defaultProps={clickable:!0,dblclickable:!0},g.displayName="Shortcut"},1122:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(995)),o=n(r(796)),s=n(r(797)),l=n(r(802)),u=n(r(804)),d=n(r(803)),c=n(r(805)),f=n(r(1)),h=a(r(0)),p=n(r(3)),v=n(r(1123)),g=n(r(1128)),y=n(r(1129)),m=n(r(1131)),b=n(r(1132)),E=n(r(1133)),k=n(r(1134)),T=n(r(1135)),_=n(r(1136)),S=n(r(1137)),R=n(r(998)),A=r(843),w={children:f.default.any,autoHide:f.default.bool,autoHideTime:f.default.number,disableDefaultControls:f.default.bool,disableCompletely:f.default.bool,className:f.default.string},O=function(e){function t(e){var r;return(0,o.default)(this,t),(r=(0,l.default)(this,(0,u.default)(t).call(this,e))).getDefaultChildren=r.getDefaultChildren.bind((0,d.default)(r)),r.getFullChildren=r.getFullChildren.bind((0,d.default)(r)),r}return(0,c.default)(t,e),(0,s.default)(t,[{key:"getDefaultChildren",value:function(){return[h.default.createElement(g.default,{key:"play-toggle",order:1}),h.default.createElement(S.default,{key:"volume-menu-button",order:4}),h.default.createElement(k.default,{key:"current-time-display",order:5.1}),h.default.createElement(_.default,{key:"time-divider",order:5.2}),h.default.createElement(T.default,{key:"duration-display",order:5.3}),h.default.createElement(v.default,{key:"progress-control",order:6}),h.default.createElement(b.default,{key:"fullscreen-toggle",order:8})]}},{key:"getFullChildren",value:function(){return[h.default.createElement(g.default,{key:"play-toggle",order:1}),h.default.createElement(m.default,{key:"replay-control",order:2}),h.default.createElement(y.default,{key:"forward-control",order:3}),h.default.createElement(S.default,{key:"volume-menu-button",order:4}),h.default.createElement(k.default,{key:"current-time-display",order:5}),h.default.createElement(_.default,{key:"time-divider",order:6}),h.default.createElement(T.default,{key:"duration-display",order:7}),h.default.createElement(v.default,{key:"progress-control",order:8}),h.default.createElement(E.default,{key:"remaining-time-display",order:9}),h.default.createElement(R.default,{rates:[1,1.25,1.5,2],key:"playback-rate",order:10}),h.default.createElement(b.default,{key:"fullscreen-toggle",order:11})]}},{key:"getChildren",value:function(){var e=h.default.Children.toArray(this.props.children),t=this.props.disableDefaultControls?[]:this.getDefaultChildren(),r=this.props,a=(r.className,(0,i.default)(r,["className"]));return(0,A.mergeAndSortChildren)(t,e,a)}},{key:"render",value:function(){var e=this.props,t=e.autoHide,r=e.className,a=e.disableCompletely,n=this.getChildren();return a?null:h.default.createElement("div",{className:(0,p.default)("video-react-control-bar",{"video-react-control-bar-auto-hide":t},r)},n)}}]),t}(h.Component);t.default=O,O.propTypes=w,O.defaultProps={autoHide:!0,disableCompletely:!1},O.displayName="ControlBar"},1123:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(916)),o=n(r(796)),s=n(r(797)),l=n(r(802)),u=n(r(804)),d=n(r(803)),c=n(r(805)),f=n(r(1)),h=a(r(0)),p=n(r(3)),v=a(r(942)),g=n(r(1124)),y={player:f.default.object,className:f.default.string},m=function(e){function t(e,r){var a;return(0,o.default)(this,t),(a=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).state={mouseTime:{time:null,position:0}},a.handleMouseMoveThrottle=a.handleMouseMove.bind((0,d.default)(a)),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"handleMouseMove",value:function(e){if(e.pageX){var t=this.props.player.duration,r=this.seekBar,a=v.getPointerPosition(r,e).x*t,n=e.pageX-v.findElPosition(r).left;this.setState({mouseTime:{time:a,position:n}})}}},{key:"render",value:function(){var e=this,t=this.props.className;return h.default.createElement("div",{onMouseMove:this.handleMouseMoveThrottle,className:(0,p.default)("video-react-progress-control video-react-control",t)},h.default.createElement(g.default,(0,i.default)({mouseTime:this.state.mouseTime,ref:function(t){e.seekBar=t}},this.props)))}}]),t}(h.Component);t.default=m,m.propTypes=y,m.displayName="ProgressControl"},1124:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p=n(r(997)),v=n(r(1125)),g=n(r(1126)),y=n(r(1127)),m=r(843),b={player:c.default.object,mouseTime:c.default.object,actions:c.default.object,className:c.default.string},E=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).getPercent=a.getPercent.bind((0,u.default)(a)),a.getNewTime=a.getNewTime.bind((0,u.default)(a)),a.stepForward=a.stepForward.bind((0,u.default)(a)),a.stepBack=a.stepBack.bind((0,u.default)(a)),a.handleMouseDown=a.handleMouseDown.bind((0,u.default)(a)),a.handleMouseMove=a.handleMouseMove.bind((0,u.default)(a)),a.handleMouseUp=a.handleMouseUp.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"getPercent",value:function(){var e=this.props.player,t=e.currentTime,r=(e.seekingTime||t)/e.duration;return r>=1?1:r}},{key:"getNewTime",value:function(e){var t=this.props.player.duration,r=this.slider.calculateDistance(e)*t;return r===t?r-.1:r}},{key:"handleMouseDown",value:function(){}},{key:"handleMouseUp",value:function(e){var t=this.props.actions,r=this.getNewTime(e);t.seek(r),t.handleEndSeeking(r)}},{key:"handleMouseMove",value:function(e){var t=this.props.actions,r=this.getNewTime(e);t.handleSeekingTime(r)}},{key:"stepForward",value:function(){this.props.actions.forward(5)}},{key:"stepBack",value:function(){this.props.actions.replay(5)}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,a=r.currentTime,n=r.seekingTime,i=r.duration,o=r.buffered,s=t.mouseTime,l=n||a;return f.default.createElement(p.default,{ref:function(t){e.slider=t},label:"video progress bar",className:(0,h.default)("video-react-progress-holder",this.props.className),valuenow:(100*this.getPercent()).toFixed(2),valuetext:(0,m.formatTime)(l,i),onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,getPercent:this.getPercent,stepForward:this.stepForward,stepBack:this.stepBack},f.default.createElement(g.default,{buffered:o,currentTime:l,duration:i}),f.default.createElement(y.default,{duration:i,mouseTime:s}),f.default.createElement(v.default,{currentTime:l,duration:i}))}}]),t}(f.Component);t.default=E,E.propTypes=b,E.displayName="SeekBar"},1125:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s=r(843),l={currentTime:n.default.number,duration:n.default.number,percentage:n.default.string,className:n.default.string};function u(e){var t=e.currentTime,r=e.duration,a=e.percentage,n=e.className;return i.default.createElement("div",{"data-current-time":(0,s.formatTime)(t,r),className:(0,o.default)("video-react-play-progress video-react-slider-bar",n),style:{width:a}},i.default.createElement("span",{className:"video-react-control-text"},"Progress: ".concat(a)))}u.propTypes=l,u.displayName="PlayProgressBar"},1126:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s={duration:n.default.number,buffered:n.default.object,className:n.default.string};function l(e){var t=e.buffered,r=e.duration,a=e.className;if(!t||!t.length)return null;var n=t.end(t.length-1),s={};function l(e,t){var r=e/t||0;return"".concat(100*(r>=1?1:r),"%")}n>r&&(n=r),s.width=l(n,r);for(var u=[],d=0;d<t.length;d++){var c=t.start(d),f=t.end(d),h=i.default.createElement("div",{style:{left:l(c,n),width:l(f-c,n)},key:"part-".concat(d)});u.push(h)}return 0===u.length&&(u=null),i.default.createElement("div",{style:s,className:(0,o.default)("video-react-load-progress",a)},i.default.createElement("span",{className:"video-react-control-text"},"Loaded: 0%"),u)}l.propTypes=s,l.displayName="LoadProgressBar"},1127:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s=r(843);function l(e){var t=e.duration,r=e.mouseTime,a=e.className,n=e.text;if(!r.time)return null;var l=n||(0,s.formatTime)(r.time,t);return i.default.createElement("div",{className:(0,o.default)("video-react-mouse-display",a),style:{left:"".concat(r.position,"px")},"data-current-time":l})}l.propTypes={duration:n.default.number,mouseTime:n.default.object,className:n.default.string},l.displayName="MouseTimeDisplay";var u=l;t.default=u},1128:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p={actions:c.default.object,player:c.default.object,className:c.default.string},v=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.actions;e.player.paused?t.play():t.pause()}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,a=t.className,n=r.paused?"Play":"Pause";return f.default.createElement("button",{ref:function(t){e.button=t},className:(0,h.default)(a,{"video-react-play-control":!0,"video-react-control":!0,"video-react-button":!0,"video-react-paused":r.paused,"video-react-playing":!r.paused}),type:"button",tabIndex:"0",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},n))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="PlayToggle"},1129:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a(r(1130)).default)("forward");n.displayName="ForwardControl";var i=n;t.default=i},1130:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h={actions:c.default.object,className:c.default.string,seconds:c.default.oneOf([5,10,30])},p={seconds:10};t.default=function(e){var t=function(t){function r(e,t){var a;return(0,i.default)(this,r),(a=(0,s.default)(this,(0,l.default)(r).call(this,e,t))).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,d.default)(r,t),(0,o.default)(r,[{key:"handleClick",value:function(){var t=this.props,r=t.actions,a=t.seconds;"forward"===e?r.forward(a):r.replay(a)}},{key:"render",value:function(){var t=this,r=this.props,a=r.seconds,n=r.className,i=["video-react-control","video-react-button","video-react-icon"];return i.push("video-react-icon-".concat(e,"-").concat(a),"video-react-".concat(e,"-control")),n&&i.push(n),f.default.createElement("button",{ref:function(e){t.button=e},className:i.join(" "),type:"button",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},"".concat(e," ").concat(a," seconds")))}}]),r}(f.Component);return t.propTypes=h,t.defaultProps=p,t}},1131:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,a(r(1130)).default)("replay");n.displayName="ReplayControl";var i=n;t.default=i},1132:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p={actions:c.default.object,player:c.default.object,className:c.default.string},v=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.player;e.actions.toggleFullscreen(t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,a=t.className;return f.default.createElement("button",{className:(0,h.default)(a,{"video-react-icon-fullscreen-exit":r.isFullscreen,"video-react-icon-fullscreen":!r.isFullscreen},"video-react-fullscreen-control video-react-control video-react-button video-react-icon"),ref:function(t){e.button=t},type:"button",tabIndex:"0",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},"Non-Fullscreen"))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="FullscreenToggle"},1133:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s=r(843),l={player:n.default.object,className:n.default.string};function u(e){var t=e.player,r=t.currentTime,a=t.duration,n=e.className,l=a-r,u=(0,s.formatTime)(l);return i.default.createElement("div",{className:(0,o.default)("video-react-remaining-time video-react-time-control video-react-control",n)},i.default.createElement("div",{className:"video-react-remaining-time-display","aria-live":"off"},i.default.createElement("span",{className:"video-react-control-text"},"Remaining Time "),"-".concat(u)))}u.propTypes=l,u.displayName="RemainingTimeDisplay";var d=u;t.default=d},1134:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s=r(843),l={player:n.default.object,className:n.default.string};function u(e){var t=e.player,r=t.currentTime,a=t.duration,n=e.className,l=(0,s.formatTime)(r,a);return i.default.createElement("div",{className:(0,o.default)("video-react-current-time video-react-time-control video-react-control",n)},i.default.createElement("div",{className:"video-react-current-time-display","aria-live":"off"},i.default.createElement("span",{className:"video-react-control-text"},"Current Time "),l))}u.propTypes=l,u.displayName="CurrentTimeDisplay";var d=u;t.default=d},1135:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s=r(843),l={player:n.default.object,className:n.default.string};function u(e){var t=e.player.duration,r=e.className,a=(0,s.formatTime)(t);return i.default.createElement("div",{className:(0,o.default)(r,"video-react-duration video-react-time-control video-react-control")},i.default.createElement("div",{className:"video-react-duration-display","aria-live":"off"},i.default.createElement("span",{className:"video-react-control-text"},"Duration Time "),a))}u.propTypes=l,u.displayName="DurationDisplay";var d=u;t.default=d},1136:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s={separator:n.default.string,className:n.default.string};function l(e){var t=e.separator,r=e.className,a=t||"/";return i.default.createElement("div",{className:(0,o.default)("video-react-time-control video-react-time-divider",r),dir:"ltr"},i.default.createElement("div",null,i.default.createElement("span",null,a)))}l.propTypes=s,l.displayName="TimeDivider"},1137:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(916)),o=n(r(796)),s=n(r(797)),l=n(r(802)),u=n(r(804)),d=n(r(803)),c=n(r(805)),f=n(r(1)),h=a(r(0)),p=n(r(3)),v=n(r(1557)),g=n(r(1559)),y={player:f.default.object,actions:f.default.object,vertical:f.default.bool,className:f.default.string,alwaysShowVolume:f.default.bool},m=function(e){function t(e,r){var a;return(0,o.default)(this,t),(a=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).state={active:!1},a.handleClick=a.handleClick.bind((0,d.default)(a)),a.handleFocus=a.handleFocus.bind((0,d.default)(a)),a.handleBlur=a.handleBlur.bind((0,d.default)(a)),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.player;e.actions.mute(!t.muted)}},{key:"handleFocus",value:function(){this.setState({active:!0})}},{key:"handleBlur",value:function(){this.setState({active:!1})}},{key:"render",value:function(){var e=this.props,t=e.vertical,r=e.player,a=e.className,n=!t,o=this.volumeLevel;return h.default.createElement(v.default,{className:(0,p.default)(a,{"video-react-volume-menu-button-vertical":t,"video-react-volume-menu-button-horizontal":!t,"video-react-vol-muted":r.muted,"video-react-vol-0":0===o&&!r.muted,"video-react-vol-1":1===o,"video-react-vol-2":2===o,"video-react-vol-3":3===o,"video-react-slider-active":this.props.alwaysShowVolume||this.state.active,"video-react-lock-showing":this.props.alwaysShowVolume||this.state.active},"video-react-volume-menu-button"),onClick:this.handleClick,inline:n},h.default.createElement(g.default,(0,i.default)({onFocus:this.handleFocus,onBlur:this.handleBlur},this.props)))}},{key:"volumeLevel",get:function(){var e=this.props.player,t=e.volume,r=e.muted,a=3;return 0===t||r?a=0:t<.33?a=1:t<.67&&(a=2),a}}]),t}(h.Component);m.propTypes=y,m.defaultProps={vertical:!1},m.displayName="VolumeMenuButton";var b=m;t.default=b},1138:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(916)),o=n(r(857)),s=n(r(796)),l=n(r(797)),u=n(r(802)),d=n(r(804)),c=n(r(803)),f=n(r(805)),h=n(r(1)),p=a(r(0)),v=n(r(3)),g={tagName:h.default.string,onClick:h.default.func.isRequired,onFocus:h.default.func,onBlur:h.default.func,className:h.default.string},y=function(e){function t(e,r){var a;return(0,s.default)(this,t),(a=(0,u.default)(this,(0,d.default)(t).call(this,e,r))).handleClick=a.handleClick.bind((0,c.default)(a)),a.handleFocus=a.handleFocus.bind((0,c.default)(a)),a.handleBlur=a.handleBlur.bind((0,c.default)(a)),a.handleKeypress=a.handleKeypress.bind((0,c.default)(a)),a}return(0,f.default)(t,e),(0,l.default)(t,[{key:"handleKeypress",value:function(e){32!==e.which&&13!==e.which||(e.preventDefault(),this.handleClick(e))}},{key:"handleClick",value:function(e){(0,this.props.onClick)(e)}},{key:"handleFocus",value:function(e){document.addEventListener("keydown",this.handleKeypress),this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){document.removeEventListener("keydown",this.handleKeypress),this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this.props.tagName,t=(0,o.default)({},this.props);return delete t.tagName,delete t.className,p.default.createElement(e,(0,i.default)({className:(0,v.default)(this.props.className),role:"button",tabIndex:"0",onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur},t))}}]),t}(p.Component);t.default=y,y.propTypes=g,y.defaultProps={tagName:"div"},y.displayName="ClickableComponent"},1544:function(e,t,r){"use strict";r(38),r(1545),r(388),r(385),r(990),r(384)},1545:function(e,t,r){},1546:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Player",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Video",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"BigPlayButton",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"LoadingSpinner",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"PosterImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Slider",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Bezel",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Shortcut",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ControlBar",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"PlayToggle",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"ForwardControl",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"ReplayControl",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"FullscreenToggle",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"ProgressControl",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"SeekBar",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"PlayProgressBar",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"LoadProgressBar",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"MouseTimeDisplay",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"VolumeMenuButton",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"PlaybackRateMenuButton",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"PlaybackRate",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"ClosedCaptionButton",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"RemainingTimeDisplay",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"CurrentTimeDisplay",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"DurationDisplay",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"TimeDivider",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"MenuButton",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"playerReducer",{enumerable:!0,get:function(){return x.playerReducer}}),Object.defineProperty(t,"operationReducer",{enumerable:!0,get:function(){return x.operationReducer}}),t.videoActions=t.playerActions=void 0;var i=n(r(1547)),o=n(r(1117)),s=n(r(1114)),l=n(r(1115)),u=n(r(1116)),d=n(r(997)),c=n(r(1120)),f=n(r(1121)),h=n(r(1122)),p=n(r(1128)),v=n(r(1129)),g=n(r(1131)),y=n(r(1132)),m=n(r(1123)),b=n(r(1124)),E=n(r(1125)),k=n(r(1126)),T=n(r(1127)),_=n(r(1137)),S=n(r(998)),R=n(r(1564)),A=n(r(1565)),w=n(r(1133)),O=n(r(1134)),C=n(r(1135)),P=n(r(1136)),L=n(r(999)),D=a(r(941));t.playerActions=D;var M=a(r(996));t.videoActions=M;var x=r(1112)},1547:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(857)),o=n(r(994)),s=n(r(995)),l=n(r(796)),u=n(r(797)),d=n(r(802)),c=n(r(804)),f=n(r(803)),h=n(r(805)),p=n(r(1)),v=a(r(0)),g=n(r(3)),y=n(r(1550)),m=n(r(1114)),b=n(r(1115)),E=n(r(1116)),k=n(r(1117)),T=n(r(1120)),_=n(r(1121)),S=n(r(1122)),R=a(r(1563)),A=r(942),w=r(843),O=n(r(1113)),C={children:p.default.any,width:p.default.oneOfType([p.default.string,p.default.number]),height:p.default.oneOfType([p.default.string,p.default.number]),fluid:p.default.bool,muted:p.default.bool,playsInline:p.default.bool,aspectRatio:p.default.string,className:p.default.string,videoId:p.default.string,startTime:p.default.number,loop:p.default.bool,autoPlay:p.default.bool,src:p.default.string,poster:p.default.string,preload:p.default.oneOf(["auto","metadata","none"]),onLoadStart:p.default.func,onWaiting:p.default.func,onCanPlay:p.default.func,onCanPlayThrough:p.default.func,onPlaying:p.default.func,onEnded:p.default.func,onSeeking:p.default.func,onSeeked:p.default.func,onPlay:p.default.func,onPause:p.default.func,onProgress:p.default.func,onDurationChange:p.default.func,onError:p.default.func,onSuspend:p.default.func,onAbort:p.default.func,onEmptied:p.default.func,onStalled:p.default.func,onLoadedMetadata:p.default.func,onLoadedData:p.default.func,onTimeUpdate:p.default.func,onRateChange:p.default.func,onVolumeChange:p.default.func,store:p.default.object},P=function(e){function t(e){var r;return(0,l.default)(this,t),(r=(0,d.default)(this,(0,c.default)(t).call(this,e))).controlsHideTimer=null,r.video=null,r.manager=new y.default(e.store),r.actions=r.manager.getActions(),r.manager.subscribeToPlayerStateChange(r.handleStateChange.bind((0,f.default)(r))),r.getStyle=r.getStyle.bind((0,f.default)(r)),r.handleResize=r.handleResize.bind((0,f.default)(r)),r.getChildren=r.getChildren.bind((0,f.default)(r)),r.handleMouseMove=(0,w.throttle)(r.handleMouseMove.bind((0,f.default)(r)),250),r.handleMouseDown=r.handleMouseDown.bind((0,f.default)(r)),r.startControlsTimer=r.startControlsTimer.bind((0,f.default)(r)),r.handleFullScreenChange=r.handleFullScreenChange.bind((0,f.default)(r)),r.handleKeyDown=r.handleKeyDown.bind((0,f.default)(r)),r.handleFocus=r.handleFocus.bind((0,f.default)(r)),r.handleBlur=r.handleBlur.bind((0,f.default)(r)),r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize),O.default.addEventListener(this.handleFullScreenChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),O.default.removeEventListener(this.handleFullScreenChange),this.controlsHideTimer&&window.clearTimeout(this.controlsHideTimer)}},{key:"getDefaultChildren",value:function(e){var t=this;return[v.default.createElement(k.default,{ref:function(e){t.video=e,t.manager.video=t.video},key:"video",order:0},e),v.default.createElement(E.default,{key:"poster-image",order:1}),v.default.createElement(b.default,{key:"loading-spinner",order:2}),v.default.createElement(T.default,{key:"bezel",order:3}),v.default.createElement(m.default,{key:"big-play-button",order:4}),v.default.createElement(S.default,{key:"control-bar",order:5}),v.default.createElement(_.default,{key:"shortcut",order:99})]}},{key:"getChildren",value:function(e){e.className;var t=e.children,r=(0,s.default)(e,["className","children"]),a=v.default.Children.toArray(this.props.children).filter((function(e){return!(0,w.isVideoChild)(e)})),n=this.getDefaultChildren(t);return(0,w.mergeAndSortChildren)(n,a,r)}},{key:"setWidthOrHeight",value:function(e,t,r){var a;"string"===typeof r?"auto"===r?a="auto":r.match(/\d+%/)&&(a=r):"number"===typeof r&&(a="".concat(r,"px")),Object.assign(e,(0,o.default)({},t,a))}},{key:"getStyle",value:function(){var e,t,r=this.props,a=r.fluid,n=r.aspectRatio,i=r.height,o=r.width,s=this.manager.getState().player,l={},u=(void 0!==n&&"auto"!==n?n:s.videoWidth?"".concat(s.videoWidth,":").concat(s.videoHeight):"16:9").split(":"),d=u[1]/u[0];return e=void 0!==o?o:void 0!==i?i/d:s.videoWidth||400,t=void 0!==i?i:e*d,a?l.paddingTop="".concat(100*d,"%"):(this.setWidthOrHeight(l,"width",e),this.setWidthOrHeight(l,"height",t)),l}},{key:"getState",value:function(){return this.manager.getState()}},{key:"play",value:function(){this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"load",value:function(){this.video.load()}},{key:"addTextTrack",value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:"canPlayType",value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:"seek",value:function(e){this.video.seek(e)}},{key:"forward",value:function(e){this.video.forward(e)}},{key:"replay",value:function(e){this.video.replay(e)}},{key:"toggleFullscreen",value:function(){this.video.toggleFullscreen()}},{key:"subscribeToStateChange",value:function(e){return this.manager.subscribeToPlayerStateChange(e)}},{key:"handleResize",value:function(){}},{key:"handleFullScreenChange",value:function(e){e.target===this.manager.rootElement&&this.actions.handleFullscreenChange(O.default.isFullscreen)}},{key:"handleMouseDown",value:function(){this.startControlsTimer()}},{key:"handleMouseMove",value:function(){this.startControlsTimer()}},{key:"handleKeyDown",value:function(){this.startControlsTimer()}},{key:"startControlsTimer",value:function(){var e=this,t=3e3;v.default.Children.forEach(this.props.children,(function(e){if(v.default.isValidElement(e)&&e.type===S.default){var r=e.props.autoHideTime;"number"===typeof r&&(t=r)}})),this.actions.userActivate(!0),clearTimeout(this.controlsHideTimer),this.controlsHideTimer=setTimeout((function(){e.actions.userActivate(!1)}),t)}},{key:"handleStateChange",value:function(e,t){e.isFullscreen!==t.isFullscreen&&(this.handleResize(),(0,A.focusNode)(this.manager.rootElement)),this.forceUpdate()}},{key:"handleFocus",value:function(){this.actions.activate(!0)}},{key:"handleBlur",value:function(){this.actions.activate(!1)}},{key:"render",value:function(){var e=this,t=this.props.fluid,r=this.manager.getState().player,a=r.paused,n=r.hasStarted,o=r.waiting,s=r.seeking,l=r.isFullscreen,u=r.userActivity,d=(0,i.default)({},this.props,{player:r,actions:this.actions,manager:this.manager,store:this.manager.store,video:this.video?this.video.video:null}),c=this.getChildren(d);return v.default.createElement("div",{className:(0,g.default)({"video-react-controls-enabled":!0,"video-react-has-started":n,"video-react-paused":a,"video-react-playing":!a,"video-react-waiting":o,"video-react-seeking":s,"video-react-fluid":t,"video-react-fullscreen":l,"video-react-user-inactive":!u,"video-react-user-active":u,"video-react-workinghover":!R.IS_IOS},"video-react",this.props.className),style:this.getStyle(),ref:function(t){e.manager.rootElement=t},role:"region",onTouchStart:this.handleMouseDown,onMouseDown:this.handleMouseDown,onTouchMove:this.handleMouseMove,onMouseMove:this.handleMouseMove,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:"-1"},c)}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:"videoWidth",get:function(){return this.video.videoWidth}},{key:"videoHeight",get:function(){return this.video.videoHeight}}]),t}(v.Component);t.default=P,P.contextTypes={store:p.default.object},P.propTypes=C,P.defaultProps={fluid:!0,muted:!1,playsInline:!1,preload:"auto",aspectRatio:"auto"},P.displayName="Player"},1548:function(e,t){e.exports=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}},1549:function(e,t){function r(t,a){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,a)}e.exports=r},1550:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(857)),o=n(r(796)),s=n(r(797)),l=r(150),u=n(r(1112)),d=a(r(941)),c=a(r(996)),f=function(){function e(t){(0,o.default)(this,e),this.store=t||(0,l.createStore)(u.default),this.video=null,this.rootElement=null}return(0,s.default)(e,[{key:"getActions",value:function(){var e=this,t=this.store.dispatch,r=(0,i.default)({},d,c);return Object.keys(r).filter((function(e){return"function"===typeof r[e]})).reduce((function(a,n){var i;return a[n]=(i=r[n],function(){var r=i.apply(e,arguments);"undefined"!==typeof r&&t(r)}),a}),{})}},{key:"getState",value:function(){return this.store.getState()}},{key:"subscribeToStateChange",value:function(e,t){t||(t=this.getState.bind(this));var r=t();return this.store.subscribe((function(){var a=t();if(a!==r){var n=r;r=a,e(a,n)}}))}},{key:"subscribeToOperationStateChange",value:function(e){var t=this;return this.subscribeToStateChange(e,(function(){return t.getState().operation}))}},{key:"subscribeToPlayerStateChange",value:function(e){var t=this;return this.subscribeToStateChange(e,(function(){return t.getState().player}))}}]),e}();t.default=f},1551:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.USER_ACTIVATE:return(0,n.default)({},e,{userActivity:t.activity});case o.PLAYER_ACTIVATE:return(0,n.default)({},e,{isActive:t.activity});case o.FULLSCREEN_CHANGE:return(0,n.default)({},e,{isFullscreen:!!t.isFullscreen});case i.SEEKING_TIME:return(0,n.default)({},e,{seekingTime:t.time});case i.END_SEEKING:return(0,n.default)({},e,{seekingTime:0});case i.LOAD_START:return(0,n.default)({},e,t.videoProps,{hasStarted:!1,ended:!1});case i.CAN_PLAY:return(0,n.default)({},e,t.videoProps,{waiting:!1});case i.WAITING:return(0,n.default)({},e,t.videoProps,{waiting:!0});case i.CAN_PLAY_THROUGH:case i.PLAYING:return(0,n.default)({},e,t.videoProps,{waiting:!1});case i.PLAY:return(0,n.default)({},e,t.videoProps,{ended:!1,paused:!1,autoPaused:!1,waiting:!1,hasStarted:!0});case i.PAUSE:return(0,n.default)({},e,t.videoProps,{paused:!0});case i.END:return(0,n.default)({},e,t.videoProps,{ended:!0});case i.SEEKING:return(0,n.default)({},e,t.videoProps,{seeking:!0});case i.SEEKED:return(0,n.default)({},e,t.videoProps,{seeking:!1});case i.ERROR:return(0,n.default)({},e,t.videoProps,{error:"UNKNOWN ERROR",ended:!0});case i.DURATION_CHANGE:case i.TIME_UPDATE:case i.VOLUME_CHANGE:case i.PROGRESS_CHANGE:case i.RATE_CHANGE:case i.SUSPEND:case i.ABORT:case i.EMPTIED:case i.STALLED:case i.LOADED_META_DATA:case i.LOADED_DATA:case i.RESIZE:return(0,n.default)({},e,t.videoProps);case i.ACTIVATE_TEXT_TRACK:return(0,n.default)({},e,{activeTextTrack:t.textTrack});default:return e}};var n=a(r(857)),i=r(996),o=r(941),s={currentSrc:null,duration:0,currentTime:0,seekingTime:0,buffered:null,waiting:!1,seeking:!1,paused:!0,autoPaused:!1,ended:!1,playbackRate:1,muted:!1,volume:1,readyState:0,networkState:0,videoWidth:0,videoHeight:0,hasStarted:!1,userActivity:!0,isActive:!1,isFullscreen:!1,activeTextTrack:null}},1552:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.OPERATE:return(0,n.default)({},e,{count:e.count+1,operation:(0,n.default)({},e.operation,t.operation)});default:return e}};var n=a(r(857)),i=r(941),o={count:0,operation:{action:"",source:""}}},1553:function(e,t,r){var a=r(1119);e.exports=function(e){if(Array.isArray(e))return a(e)}},1554:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},1555:function(e,t,r){var a=r(1119);e.exports=function(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}},1556:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},1557:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var n=a(r(916)),i=a(r(857)),o=a(r(1)),s=a(r(0)),l=a(r(3)),u=a(r(1138)),d=a(r(1558)),c={inline:o.default.bool,onClick:o.default.func.isRequired,onFocus:o.default.func,onBlur:o.default.func,className:o.default.string};function f(e){var t=e.inline,r=e.className,a=(0,i.default)({},e);return delete a.children,delete a.inline,delete a.className,s.default.createElement(u.default,(0,n.default)({className:(0,l.default)(r,{"video-react-menu-button-inline":!!t,"video-react-menu-button-popup":!t},"video-react-control video-react-button video-react-menu-button")},a),s.default.createElement(d.default,e))}f.propTypes=c,f.defaultProps={inline:!0},f.displayName="PopupButton"},1558:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h={player:c.default.object,children:c.default.any},p=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props.children;return f.default.createElement("div",{className:"video-react-menu",onClick:this.handleClick},f.default.createElement("div",{className:"video-react-menu-content"},e))}}]),t}(f.Component);t.default=p,p.propTypes=h,p.displayName="Popup"},1559:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(916)),o=n(r(796)),s=n(r(797)),l=n(r(802)),u=n(r(804)),d=n(r(803)),c=n(r(805)),f=n(r(1)),h=a(r(0)),p=n(r(3)),v=n(r(997)),g=n(r(1560)),y={actions:f.default.object,player:f.default.object,className:f.default.string,onFocus:f.default.func,onBlur:f.default.func},m=function(e){function t(e,r){var a;return(0,o.default)(this,t),(a=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).state={percentage:"0%"},a.handleMouseMove=a.handleMouseMove.bind((0,d.default)(a)),a.handlePercentageChange=a.handlePercentageChange.bind((0,d.default)(a)),a.checkMuted=a.checkMuted.bind((0,d.default)(a)),a.getPercent=a.getPercent.bind((0,d.default)(a)),a.stepForward=a.stepForward.bind((0,d.default)(a)),a.stepBack=a.stepBack.bind((0,d.default)(a)),a.handleFocus=a.handleFocus.bind((0,d.default)(a)),a.handleBlur=a.handleBlur.bind((0,d.default)(a)),a.handleClick=a.handleClick.bind((0,d.default)(a)),a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"getPercent",value:function(){var e=this.props.player;return e.muted?0:e.volume}},{key:"checkMuted",value:function(){var e=this.props,t=e.player,r=e.actions;t.muted&&r.mute(!1)}},{key:"handleMouseMove",value:function(e){var t=this.props.actions;this.checkMuted();var r=this.slider.calculateDistance(e);t.changeVolume(r)}},{key:"stepForward",value:function(){var e=this.props,t=e.player,r=e.actions;this.checkMuted(),r.changeVolume(t.volume+.1)}},{key:"stepBack",value:function(){var e=this.props,t=e.player,r=e.actions;this.checkMuted(),r.changeVolume(t.volume-.1)}},{key:"handleFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e)}},{key:"handlePercentageChange",value:function(e){e!==this.state.percentage&&this.setState({percentage:e})}},{key:"handleClick",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,a=t.className,n=(100*r.volume).toFixed(2);return h.default.createElement(v.default,(0,i.default)({ref:function(t){e.slider=t},label:"volume level",valuenow:n,valuetext:"".concat(n,"%"),onMouseMove:this.handleMouseMove,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,sliderActive:this.handleFocus,sliderInactive:this.handleBlur,getPercent:this.getPercent,onPercentageChange:this.handlePercentageChange,stepForward:this.stepForward,stepBack:this.stepBack},this.props,{className:(0,p.default)(a,"video-react-volume-bar video-react-slider-bar")}),h.default.createElement(g.default,this.props))}}]),t}(h.Component);m.propTypes=y,m.displayName="VolumeBar";var b=m;t.default=b},1560:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(1)),i=a(r(0)),o=a(r(3)),s={percentage:n.default.string,vertical:n.default.bool,className:n.default.string};function l(e){var t=e.percentage,r=e.vertical,a=e.className,n={};return r?n.height=t:n.width=t,i.default.createElement("div",{className:(0,o.default)(a,"video-react-volume-level"),style:n},i.default.createElement("span",{className:"video-react-control-text"}))}l.propTypes=s,l.defaultProps={percentage:"100%",vertical:!1},l.displayName="VolumeLevel";var u=l;t.default=u},1561:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h={children:c.default.any},p=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){return f.default.createElement("div",{className:"video-react-menu video-react-lock-showing",role:"presentation",onClick:this.handleClick},f.default.createElement("ul",{className:"video-react-menu-content"},this.props.children))}}]),t}(f.Component);t.default=p,p.propTypes=h,p.displayName="Menu"},1562:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p={item:c.default.object,index:c.default.number,activateIndex:c.default.number,onSelectItem:c.default.func},v=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=a.handleClick.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.index;(0,e.onSelectItem)(t)}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.index,a=e.activateIndex;return f.default.createElement("li",{className:(0,h.default)({"video-react-menu-item":!0,"video-react-selected":r===a}),role:"menuitem",onClick:this.handleClick},t.label,f.default.createElement("span",{className:"video-react-control-text"}))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="MenuItem"},1563:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_IOS=t.IS_IPOD=t.IS_IPHONE=t.IS_IPAD=void 0;var a="undefined"!==typeof window&&window.navigator?window.navigator.userAgent:"",n=/iPad/i.test(a);t.IS_IPAD=n;var i=/iPhone/i.test(a)&&!n;t.IS_IPHONE=i;var o=/iPod/i.test(a);t.IS_IPOD=o;var s=i||n||o;t.IS_IOS=s},1564:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(805)),d=a(r(0)),c=n(r(998)),f=r(843),h=function(e){function t(e,r){var a;return(0,i.default)(this,t),a=(0,s.default)(this,(0,l.default)(t).call(this,e,r)),(0,f.deprecatedWarning)("PlaybackRate","PlaybackRateMenuButton"),a}return(0,u.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return d.default.createElement(c.default,this.props)}}]),t}(d.Component);t.default=h,h.displayName="PlaybackRate"},1565:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p=n(r(999)),v={player:c.default.object,actions:c.default.object,className:c.default.string,offMenuText:c.default.string,showOffMenu:c.default.bool,kinds:c.default.array},g=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).getTextTrackItems=a.getTextTrackItems.bind((0,u.default)(a)),a.updateState=a.updateState.bind((0,u.default)(a)),a.handleSelectItem=a.handleSelectItem.bind((0,u.default)(a)),a.state=a.getTextTrackItems(),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(){this.updateState()}},{key:"getTextTrackItems",value:function(){var e=this.props,t=e.kinds,r=e.player,a=e.offMenuText,n=e.showOffMenu,i=r.textTracks,o=r.activeTextTrack,s={items:[],selectedIndex:0},l=Array.from(i||[]);return 0===l.length||(n&&s.items.push({label:a||"Off",value:null}),l.forEach((function(e){t.length&&!t.includes(e.kind)||s.items.push({label:e.label,value:e.language})})),s.selectedIndex=s.items.findIndex((function(e){return o&&o.language===e.value})),-1===s.selectedIndex&&(s.selectedIndex=0)),s}},{key:"updateState",value:function(){var e=this.getTextTrackItems();e.selectedIndex===this.state.selectedIndex&&this.textTrackItemsAreEqual(e.items,this.state.items)||this.setState(e)}},{key:"textTrackItemsAreEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!t[r]||e[r].label!==t[r].label||e[r].value!==t[r].value)return!1;return!0}},{key:"handleSelectItem",value:function(e){var t=this.props,r=t.player,a=t.actions,n=t.showOffMenu,i=r.textTracks;Array.from(i).forEach((function(t,r){e===(n?r+1:r)?(t.mode="showing",a.activateTextTrack(t)):t.mode="hidden"}))}},{key:"render",value:function(){var e=this.state,t=e.items,r=e.selectedIndex;return f.default.createElement(p.default,{className:(0,h.default)("video-react-closed-caption",this.props.className),onSelectItem:this.handleSelectItem,items:t,selectedIndex:r},f.default.createElement("span",{className:"video-react-control-text"},"Closed Caption"))}}]),t}(f.Component);g.propTypes=v,g.defaultProps={offMenuText:"Off",showOffMenu:!0,kinds:["captions","subtitles"]},g.displayName="ClosedCaptionButton";var y=g;t.default=y},1566:function(e,t,r){},1567:function(e,t,r){e.exports=function e(t,r,a){function n(o,s){if(!r[o]){if(!t[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};t[o][0].call(u.exports,(function(e){var r=t[o][1][e];return n(r||e)}),u,u.exports,e,t,r,a)}return r[o].exports}for(var i=!1,o=0;o<a.length;o++)n(a[o]);return n}({1:[function(e,t,r){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"===typeof e}function i(e){return"object"===typeof e&&null!==e}function o(e){return void 0===e}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},a.prototype.emit=function(e){var t,r,a,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(u=r.slice()).length,l=0;l<a;l++)u[l].apply(this,s);return!0},a.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?a.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace()),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function a(){this.removeListener(e,a),r||(r=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},a.prototype.removeListener=function(e,t){var r,a,o,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,a=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){a=s;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},a.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},a.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},a.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},a.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,r){!function(e){var a=/^([^#]*)(.*)$/,n=/^([^\?]*)(.*)$/,i=/^(([a-z]+:\/\/)?[^:\/]+(?::[0-9]+)?)?(\/?.*)$/i,o={buildAbsoluteURL:function(e,t){if(t=t.trim(),/^[a-z]+:/i.test(t))return t;var r=null,s=null,l=a.exec(t);l&&(s=l[2],t=l[1]);var u=n.exec(t);u&&(r=u[2],t=u[1]);var d=a.exec(e);d&&(e=d[1]);var c=n.exec(e);c&&(e=c[1]);var f=i.exec(e);if(!f)throw new Error("Error trying to parse base URL.");var h=f[2]||"",p=f[1]||"",v=f[3];0!==v.indexOf("/")&&""!==p&&(v="/"+v);var g=null;return g=/^\/\//.test(t)?h+o.buildAbsolutePath("",t.substring(2)):/^\//.test(t)?p+"/"+o.buildAbsolutePath("",t.substring(1)):o.buildAbsolutePath(p+v,t),r&&(g+=r),s&&(g+=s),g},buildAbsolutePath:function(e,t){for(var r,a,n=t,i="",o=e.replace(/[^\/]*$/,n.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;(a=o.indexOf("/../",s))>-1;s=a+r)r=/^\/(?:\.\.\/)*/.exec(o.slice(a))[0].length,i=(i+o.substring(s,a)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(r-1)/3+"}$"),"/");return i+o.substr(s)}};"object"===typeof r&&"object"===typeof t?t.exports=o:"object"===typeof r?r.URLToolkit=o:e.URLToolkit=o}(this)},{}],3:[function(e,t,r){var a=arguments[3],n=arguments[4],i=arguments[5],o=JSON.stringify;t.exports=function(e,t){for(var r,s=Object.keys(i),l=0,u=s.length;l<u;l++){var d=s[l],c=i[d].exports;if(c===e||c&&c.default===e){r=d;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var f={};for(l=0,u=s.length;l<u;l++)f[d=s[l]]=d;n[r]=[Function(["require","module","exports"],"("+e+")(self)"),f]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[r]=r,n[h]=[Function(["require"],"var f = require("+o(r)+");(f.default ? f.default : f)(self);"),p];var v={};!function e(t){for(var r in v[t]=!0,n[t][1]){var a=n[t][1][r];v[a]||e(a)}}(h);var g="("+a+")({"+Object.keys(v).map((function(e){return o(e)+":["+n[e][0]+","+o(n[e][1])+"]"})).join(",")+"},{},["+o(h)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,m=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return m;var b=y.createObjectURL(m),E=new Worker(b);return E.objectURL=b,E}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=d(e(28)),i=d(e(27)),o=d(e(30)),s=e(26),l=e(45),u=d(e(9));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.FRAG_LOADING,n.default.FRAG_LOADED,n.default.FRAG_BUFFERED,n.default.ERROR));return r.lastLoadedFragLevel=0,r._autoLevelCapping=-1,r._nextAutoLevel=-1,r.hls=e,r.onCheck=r.abandonRulesCheck.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.clearTimer(),i.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var r=this.hls,a=e.frag.level,n=r.levels[a].details.live,i=r.config,o=void 0,s=void 0;n?(o=i.abrEwmaFastLive,s=i.abrEwmaSlowLive):(o=i.abrEwmaFastVoD,s=i.abrEwmaSlowVoD),this.bwEstimator=new u.default(r,s,o,i.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,a=r.loader,i=this.minAutoLevel;if(!a||a.stats&&a.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var s=a.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var u=performance.now()-s.trequest,d=Math.abs(t.playbackRate);if(u>500*r.duration/d){var c=e.levels,f=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/u),h=c[r.level],p=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,v=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*p/8)),g=t.currentTime,y=(v-s.loaded)/f,m=(o.default.bufferInfo(t,g,e.config.maxBufferHole).end-g)/d;if(m<2*r.duration/d&&y>m){var b=void 0,E=void 0;for(E=r.level-1;E>i;E--){var k=c[E].realBitrate?Math.max(c[E].realBitrate,c[E].bitrate):c[E].bitrate;if((b=r.duration*k/(6.4*f))<m)break}b<y&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=E,this.bwEstimator.sample(u,s.loaded),a.abort(),this.clearTimer(),e.trigger(n.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type){this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1;var r=this.hls.levels[t.level],a=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,n=(r.loaded?r.loaded.duration:0)+e.frag.duration;if(r.loaded={bytes:a,duration:n},r.realBitrate=Math.round(8*a/n),e.frag.bitrateTest){var i=e.stats;i.tparsed=i.tbuffered=i.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&1===r.loadCounter&&"main"===r.type&&(!r.bitrateTest||t.tload===t.tbuffered)){var a=t.tparsed-t.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this.bwEstimator.sample(a,t.loaded),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"findBestLevel",value:function(e,t,r,a,n,i,o,s,u){for(var d=n;d>=a;d--){var c=u[d].details,f=c?c.totalduration/c.fragments.length:t,h=!!c&&c.live,p=void 0;p=d<=e?o*r:s*r;var v=u[d].realBitrate?Math.max(u[d].realBitrate,u[d].bitrate):u[d].bitrate,g=v*f/p;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+d+"/"+Math.round(p)+"/"+v+"/"+f+"/"+i+"/"+g),p>v&&(!g||h||g<i))return d}return-1}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping=e}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator,r=this.hls,a=r.levels,n=r.config.minAutoBitrate;if(-1!==e&&(!t||!t.canEstimate()))return Math.min(e,this.maxAutoLevel);var i=this.nextABRAutoLevel;if(-1!==e&&(i=Math.min(e,i)),void 0!==n)for(var o=a[i].realBitrate?Math.max(a[i].realBitrate,a[i].bitrate):a[i].bitrate;o<n;)i++;return i},set:function(e){this._nextAutoLevel=e}},{key:"minAutoLevel",get:function(){for(var e=this.hls,t=e.levels,r=e.config.minAutoBitrate,a=t?t.length:0,n=0;n<a;n++)if((t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate)>r)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.hls.levels,t=this._autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextABRAutoLevel",get:function(){var e=this.hls,t=this.maxAutoLevel,r=e.levels,a=e.config,n=this.minAutoLevel,i=e.media,s=this.lastLoadedFragLevel,u=this.fragCurrent?this.fragCurrent.duration:0,d=i?i.currentTime:0,c=i&&0!==i.playbackRate?Math.abs(i.playbackRate):1,f=this.bwEstimator?this.bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,h=(o.default.bufferInfo(i,d,a.maxBufferHole).end-d)/c,p=this.findBestLevel(s,u,f,n,t,h,a.abrBandWidthFactor,a.abrBandWidthUpFactor,r);if(p>=0)return p;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=u?Math.min(u,a.maxStarvationDelay):a.maxStarvationDelay,g=a.abrBandWidthFactor,y=a.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;m&&(v=(u?Math.min(u,a.maxLoadingDelay):a.maxLoadingDelay)-m,l.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),g=y=1)}return p=this.findBestLevel(s,u,f,n,t,h+v,g,y,r),Math.max(p,0)}}]),t}(i.default);r.default=c},{26:26,27:27,28:28,30:30,45:45,9:9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=p(e(41)),o=p(e(30)),s=p(e(22)),l=p(e(28)),u=p(e(27)),d=p(e(31)),c=p(e(46)),f=e(26),h=e(45);function p(e){return e&&e.__esModule?e:{default:e}}var v="STOPPED",g="STARTING",y="IDLE",m="PAUSED",b="KEY_LOADING",E="FRAG_LOADING",k="FRAG_LOADING_WAITING_RETRY",T="WAITING_TRACK",_="PARSING",S="PARSED",R="BUFFER_FLUSHING",A="ENDED",w="ERROR",O="WAITING_INIT_PTS",C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=v,r.ontick=r.tick.bind(r),r.initPTS=[],r.waitingFragment=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.default.prototype.destroy.call(this),this.state=v}},{key:"onInitPtsFound",value:function(e){var t=e.id,r=e.cc,a=e.initPTS;"main"===t&&(this.initPTS[r]=a,h.logger.log("InitPTS for cc:"+r+" found from video track:"+a),this.state===O&&(h.logger.log("sending pending audio frag to demuxer"),this.state=E,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(h.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=y):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=g),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=v}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,r,n,s,u,d=this,c=this.hls,p=c.config,v=function(){switch(d.state){case w:case m:case R:break;case g:d.state=T,d.loadedmetadata=!1;break;case y:var a=d.tracks;if(!a)break;if(!d.media&&(d.startFragRequested||!p.startFragPrefetch))break;e=d.loadedmetadata?d.media.currentTime:d.nextLoadPosition;var v=d.mediaBuffer?d.mediaBuffer:d.media,_=o.default.bufferInfo(v,e,p.maxBufferHole),S=_.len,O=_.end,C=d.fragPrevious,P=p.maxMaxBufferLength,L=d.audioSwitch,D=d.trackId;if(S<P&&D<a.length){if("undefined"===typeof(r=a[D].details)){d.state=T;break}if(!L&&!r.live&&C&&C.sn===r.endSN&&(!d.media.seeking||d.media.duration-O<C.duration/2)){d.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),d.state=A;break}var M=r.fragments,x=M.length,I=M[0].start,N=M[x-1].start+M[x-1].duration,F=void 0;if(L)if(r.live&&!r.PTSKnown)h.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),O=0;else if(O=e,r.PTSKnown&&e<I){if(!(_.end>I||_.nextStart))return{v:void 0};h.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),d.media.currentTime=I+.05}if(O<=I){if(F=M[0],r.live&&F.loadIdx&&F.loadIdx===d.fragLoadIdx){var U=_.nextStart?_.nextStart:I;return h.logger.log("no alt audio available @currentTime:"+d.media.currentTime+", seeking @"+(U+.05)),d.media.currentTime=U+.05,{v:void 0}}}else!function(){var e=void 0,t=p.maxFragLookUpTolerance;O<N?(O>N-t&&(t=0),(e=i.default.search(M,(function(e){return e.start+e.duration-t<=O?1:e.start-t>O?-1:0})))||h.logger.log("frag not found @bufferEnd/start:"+O+"/"+I)):e=M[x-1],e&&(F=e,I=e.start,C&&F.level===C.level&&F.sn===C.sn&&(F.sn<r.endSN?(F=M[F.sn+1-r.startSN],h.logger.log("SN just loaded, load next one: "+F.sn)):F=null))}();if(F)if(null!=F.decryptdata.uri&&null==F.decryptdata.key)h.logger.log("Loading key for "+F.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+D),d.state=b,c.trigger(l.default.KEY_LOADING,{frag:F});else{if(h.logger.log("Loading "+F.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+D+", currentTime:"+e+",bufferEnd:"+O.toFixed(3)),void 0!==d.fragLoadIdx?d.fragLoadIdx++:d.fragLoadIdx=0,F.loadCounter){F.loadCounter++;var B=p.fragLoadingLoopThreshold;if(F.loadCounter>B&&Math.abs(d.fragLoadIdx-F.loadIdx)<B)return c.trigger(l.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:F}),{v:void 0}}else F.loadCounter=1;F.loadIdx=d.fragLoadIdx,d.fragCurrent=F,d.startFragRequested=!0,d.nextLoadPosition=F.start+F.duration,c.trigger(l.default.FRAG_LOADING,{frag:F}),d.state=E}}break;case T:(t=d.tracks[d.trackId])&&t.details&&(d.state=y);break;case k:n=performance.now(),s=d.retryDate,v=d.media,u=v&&v.seeking,(!s||n>=s||u)&&(h.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),d.state=y)}}();if("object"===("undefined"===typeof v?"undefined":a(v)))return v.v}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.loadCounter=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===A&&(this.state=y),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){h.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=y,this.fragCurrent=null,this.state=m,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=y,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,r=e.id,a=this.tracks[r],n=t.totalduration,i=0;if(h.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),t.live){var o=a.details;o&&t.fragments.length>0?(d.default.mergeDetails(o,t),i=t.fragments[0].start,t.PTSKnown?h.logger.log("live audio playlist sliding:"+i.toFixed(3)):h.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,h.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(a.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(h.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===T&&(this.state=y),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===b&&(this.state=y,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent;if(this.state===E&&t&&"audio"===e.frag.type&&e.frag.level===t.level&&e.frag.sn===t.sn){this.state=_,this.stats=e.stats;var r=this.tracks[this.trackId],a=r.details,n=a.totalduration,i=t.start,o=t.level,l=t.sn,u=t.cc,d=this.config.defaultAudioCodec||r.audioCodec;this.appended=!1,this.demuxer||(this.demuxer=new s.default(this.hls,"audio"));var c=this.initPTS[u];void 0!==c?(this.pendingBuffering=!0,h.logger.log("Demuxing "+l+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.demuxer.push(e.payload,d,null,i,u,o,l,n,t.decryptdata,!1,c)):(h.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+l+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.waitingFragment=e,this.state=O)}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===_){var r=e.tracks,a=void 0;if(r.video&&delete r.video,a=r.audio){a.levelCodec="mp4a.40.2",a.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,r),h.logger.log("audio track:audio,container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var n=a.initSegment;if(n){var i={type:"audio",data:n,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[i]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,i))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent;r&&"audio"===e.id&&"audio"===e.type&&e.sn===r.sn&&e.level===r.level&&this.state===_&&function(){var r=t.trackId,a=t.tracks[r],n=t.fragCurrent,i=t.hls;h.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),d.default.updateFragPTSDTS(a.details,n.sn,e.startPTS,e.endPTS);var o=t.audioSwitch,s=t.media,u=!1;if(o&&s)if(s.readyState){var c=s.currentTime;h.logger.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(h.logger.log("switching audio track : flushing all audio"),t.state=R,i.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,t.audioSwitch=!1,i.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r}))}else t.audioSwitch=!1,i.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r});var f=t.pendingData;t.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&f.push({type:e.type,data:t,parent:"audio",content:"data"})})),!u&&f.length&&(f.forEach((function(e){t.pendingBuffering=!0,t.hls.trigger(l.default.BUFFER_APPENDING,e)})),t.pendingData=[],t.appended=!0)),t.tick()}()}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===_&&(this.stats.tparsed=performance.now(),this.state=S,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==_&&t!==S||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(this.state===S&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),r.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var a=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("audio buffered : "+c.default.toString(a.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=y}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var a=this.config;if(r<=a.fragLoadingMaxRetry){this.fragLoadError=r,t.loadCounter=0;var n=Math.min(Math.pow(2,r-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);h.logger.warn("audioStreamController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.state=k}else h.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(l.default.ERROR,e),this.state=w}break;case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case f.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case f.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==w&&(this.state=e.fatal?w:y,h.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."))}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(h.logger.log("appending pending audio data on Buffer Flushed"),t.forEach((function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=S):(this.state=y,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(u.default);r.default=C},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=s(e(28)),i=s(e(27)),o=e(45);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.MANIFEST_LOADING,n.default.MANIFEST_LOADED,n.default.AUDIO_TRACK_LOADED));return r.ticks=0,r.ontick=r.tick.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){i.default.prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.audioTracks||[],a=!1;this.tracks=r,this.hls.trigger(n.default.AUDIO_TRACKS_UPDATED,{audioTracks:r});var i=0;r.forEach((function(e){if(e.default)return t.audioTrack=i,void(a=!0);i++})),!1===a&&r.length&&(o.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(o.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,o.logger.log("switching to audioTrack "+e);var t=this.tracks[e],r=this.hls,a=t.type,i=t.url,s={id:e,type:a,url:i};r.trigger(n.default.AUDIO_TRACK_SWITCH,s),r.trigger(n.default.AUDIO_TRACK_SWITCHING,s);var l=t.details;!i||void 0!==l&&!0!==l.live||(o.logger.log("(re)loading playlist for audioTrack "+e),r.trigger(n.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,o.logger.log("updating audioTrack "+e);var t=this.tracks[e],r=t.url,a=t.details;!r||void 0!==a&&!0!==a.live||(o.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(n.default.AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(i.default);r.default=l},{27:27,28:28,45:45}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=l(e(28)),i=l(e(27)),o=e(45),s=e(26);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.MEDIA_ATTACHING,n.default.MEDIA_DETACHING,n.default.MANIFEST_PARSED,n.default.BUFFER_RESET,n.default.BUFFER_APPENDING,n.default.BUFFER_CODECS,n.default.BUFFER_EOS,n.default.BUFFER_FLUSHING,n.default.LEVEL_PTS_UPDATED,n.default.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){i.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var a=this.sourceBuffer.audio;if(Math.abs(a.timestampOffset-e.start)>.1){var n=a.updating;try{a.abort()}catch(i){n=!0,o.logger.warn("can not abort audio buffer: "+i)}n?this.audioTimestampOffset=e.start:(o.logger.warn("change mpeg audio timestamp offset from "+a.timestampOffset+" to "+e.start),a.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video,a=0;e.altAudio&&(t||r)&&(a=(t?1:0)+(r?1:0),o.logger.log(a+" sourceBuffer(s) expected")),this.sourceBufferNb=a}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(r)}}},{key:"onMediaDetaching",value:function(){o.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){o.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(n.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){o.logger.log("media source opened"),this.hls.trigger(n.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){o.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){o.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;o.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0);this.hls.trigger(n.default.BUFFER_APPENDED,{parent:t,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){o.logger.error("sourceBuffer error:"+e),this.hls.trigger(n.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(a){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var a in e)if(!t[a]){var i=e[a],l=i.levelCodec||i.codec,u=i.container+";codecs="+l;o.logger.log("creating sourceBuffer("+u+")");try{var d=t[a]=r.addSourceBuffer(u);d.addEventListener("updateend",this.onsbue),d.addEventListener("error",this.onsbe),this.tracks[a]={codec:l,container:i.container},i.buffer=d}catch(c){o.logger.error("error while trying to add sourceBuffer:"+c.message),this.hls.trigger(n.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:c,mimeType:u})}}this.hls.trigger(n.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){o.logger.error("sourceBuffer error:",e.event),this.hls.trigger(n.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,r=e.type;for(var a in t)r&&a!==r||t[a].ended||(t[a].ended=!0,o.logger.log(a+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var a=e[r];if(!a.ended)return;if(a.updating)return void(this._needsEos=!0)}o.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(n){o.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,a=this._levelDuration;if(null!==a&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var n in r)if(r[n].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var i=e.duration;(a>this._msDuration&&a>i||i===1/0||isNaN(i))&&(o.logger.log("Updating mediasource duration to "+a.toFixed(3)),this._msDuration=t.duration=a)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var a in r)t+=r[a].buffered.length}catch(i){o.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(n.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void o.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var a=r.shift();try{var i=t[a.type];i?i.updating?r.unshift(a):(i.ended=!1,this.parent=a.parent,i.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(u){o.logger.error("error while trying to append buffer:"+u.message),r.unshift(a);var l={type:s.ErrorTypes.MEDIA_ERROR};if(22===u.code)return this.segments=[],l.details=s.ErrorDetails.BUFFER_FULL_ERROR,l.fatal=!1,void e.trigger(n.default.ERROR,l);if(this.appendError?this.appendError++:this.appendError=1,l.details=s.ErrorDetails.BUFFER_APPEND_ERROR,l.frag=this.fragCurrent,this.appendError>e.config.appendErrorMaxRetry)return o.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],l.fatal=!0,void e.trigger(n.default.ERROR,l);l.fatal=!1,e.trigger(n.default.ERROR,l)}}}}},{key:"flushBuffer",value:function(e,t,r){var a,n,i,s,l,u,d=this.sourceBuffer;if(Object.keys(d).length){if(o.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in d)if(!r||c===r){if((a=d[c]).ended=!1,a.updating)return o.logger.warn("cannot flush, sb updating in progress"),!1;try{for(n=0;n<a.buffered.length;n++)if(i=a.buffered.start(n),s=a.buffered.end(n),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(l=e,u=t):(l=Math.max(i,e),u=Math.min(s,t)),Math.min(u,s)-l>.5)return this.flushBufferCounter++,o.logger.log("flush "+c+" ["+l+","+u+"], of ["+i+","+s+"], pos:"+this.media.currentTime),a.remove(l,u),!1}catch(f){o.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else o.logger.warn("abort flushing too many retries");o.logger.log("buffer flushed")}return!0}}]),t}(i.default);r.default=u},{26:26,27:27,28:28,45:45}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=i(e(28));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.FPS_DROP_LEVEL_CAPPING,n.default.MEDIA_ATTACHING,n.default.MANIFEST_PARSED))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var t=0,r=void 0,a=void 0,n=this.mediaWidth,i=this.mediaHeight,o=0,s=0;for(r=0;r<=e&&(a=this.levels[r],!this.isLevelRestricted(r))&&(t=r,o=a.width,s=a.height,!(n<=o||i<=s));r++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||-1===this.restrictedLevels.indexOf(e))}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(i(e(27)).default);r.default=o},{27:27,28:28}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=e(44),o=(a=i)&&a.__esModule?a:{default:a},s=function(){function e(t,r,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new o.default(r),this.fast_=new o.default(a)}return n(e,[{key:"sample",value:function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),a=e/1e3;this.fast_.sample(a,r),this.slow_.sample(a,r)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();r.default=s},{44:44}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=s(e(28)),i=s(e(27)),o=e(45);function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.MEDIA_ATTACHING))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"===typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(e,t,r){var a=performance.now();if(t){if(this.lastTime){var i=a-this.lastTime,s=r-this.lastDroppedFrames,l=t-this.lastDecodedFrames,u=1e3*s/i,d=this.hls;if(d.trigger(n.default.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:r}),u>0&&s>d.config.fpsDroppedMonitoringThreshold*l){var c=d.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=c)&&(c-=1,d.trigger(n.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:d.currentLevel}),d.autoLevelCapping=c,d.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(i.default);r.default=l},{27:27,28:28,45:45}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=u(e(28)),i=u(e(27)),o=e(45),s=e(26),l=u(e(30));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.MANIFEST_LOADED,n.default.LEVEL_LOADED,n.default.FRAG_LOADED,n.default.ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=r._autoLevelCapping=-1,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,r=[],a=[],i={},l=!1,u=!1,d=this.hls,c=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),f=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach((function(e){e.videoCodec&&(l=!0),c&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(u=!0);var t=i[e.bitrate];void 0===t?(i[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)})),l&&u?r.forEach((function(e){e.videoCodec&&a.push(e)})):a=r,(a=a.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||f("audio",t))&&(!r||f("video",r))}))).length){t=a[0].bitrate,a.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=a;for(var h=0;h<a.length;h++)if(a[h].bitrate===t){this._firstLevel=h,o.logger.log("manifest loaded,"+a.length+" level(s) found, first bitrate:"+t);break}d.trigger(n.default.MANIFEST_PARSED,{levels:a,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:l,altAudio:e.audioTracks.length>0})}else d.trigger(n.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:d.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels;if(e>=0&&e<t.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e&&(o.logger.log("switching to level "+e),this._level=e,this.hls.trigger(n.default.LEVEL_SWITCH,{level:e}));var r=t[e],a=r.details;if(!a||!0===a.live){var i=r.urlId;this.hls.trigger(n.default.LEVEL_LOADING,{url:r.url[i],level:e,id:i})}}else this.hls.trigger(n.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,r=this.hls,a=void 0,i=void 0,u=!1,d=r.abrController,c=d.minAutoLevel;switch(t){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:a=e.frag.level;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:a=e.context.level,u=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:a=e.level}if(void 0!==a){(i=this._levels[a]).loadError?i.loadError++:i.loadError=1;var f=i.url.length;if(f>1&&i.loadError<f)i.urlId=(i.urlId+1)%f,i.details=void 0,o.logger.warn("level controller,"+t+" for level "+a+": switching to redundant stream id "+i.urlId);else if(-1===this._manualLevel&&a)o.logger.warn("level controller,"+t+": switch-down for next fragment"),d.nextAutoLevel=Math.max(c,a-1);else if(i&&i.details&&i.details.live)o.logger.warn("level controller,"+t+" on live stream, discard"),u&&(this._level=void 0);else if(t===s.ErrorDetails.LEVEL_LOAD_ERROR||t===s.ErrorDetails.LEVEL_LOAD_TIMEOUT){var h=r.media;if(h&&l.default.isBuffered(h,h.currentTime)&&l.default.isBuffered(h,h.currentTime+.5)){var p=r.config.levelLoadingRetryDelay;o.logger.warn("level controller,"+t+", but media buffered, retry in "+p+"ms"),this.timer=setTimeout(this.ontick,p)}else o.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0,r.trigger(n.default.ERROR,e)}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var r=this._levels[t.level];r&&(r.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var r=this._levels[t];r.loadError=0;var a=e.details;if(a.live){var n=1e3*(a.averagetargetduration?a.averagetargetduration:a.targetduration),i=r.details;i&&a.endSN===i.endSN&&(n/=2,o.logger.log("same live playlist, reload twice faster")),n-=performance.now()-e.stats.trequest,n=Math.max(1e3,Math.round(n)),o.logger.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(this.ontick,n)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e],r=t.urlId;this.hls.trigger(n.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){-1!==e&&(e=Math.max(e,this.hls.abrController.minAutoLevel)),this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.abrController.nextAutoLevel=e)}}]),t}(i.default);r.default=d},{26:26,27:27,28:28,30:30,45:45}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=h(e(41)),i=h(e(30)),o=h(e(22)),s=h(e(28)),l=h(e(27)),u=h(e(31)),d=h(e(46)),c=e(26),f=e(45);function h(e){return e&&e.__esModule?e:{default:e}}var p="STOPPED",v="IDLE",g="KEY_LOADING",y="FRAG_LOADING",m="FRAG_LOADING_WAITING_RETRY",b="WAITING_LEVEL",E="PARSING",k="PARSED",T="BUFFER_FLUSHING",_="ENDED",S="ERROR",R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=p,r.ontick=r.tick.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),l.default.prototype.destroy.call(this),this.state=p}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var a=r.startLevel;-1===a&&(a=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=a,this.loadedmetadata=!1}t>0&&-1===e&&(f.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else f.logger.warn("cannot start loading as manifest not parsed yet"),this.state=p}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=p}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case S:break;case T:this.fragLoadError=0;break;case v:if(!this._doTickIdle())return;break;case b:var e=this.levels[this.level];e&&e.details&&(this.state=v);break;case m:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(f.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v)}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&!r&&(this.startFragRequested||!t.startFragPrefetch))return!0;var a=void 0;a=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var n=e.nextLoadLevel,o=this.levels[n],l=o.bitrate,u=void 0;u=l?Math.max(8*t.maxBufferSize/l,t.maxBufferLength):t.maxBufferLength,u=Math.min(u,t.maxMaxBufferLength);var d=i.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,a,t.maxBufferHole),c=d.len;if(c>=u)return!0;f.logger.trace("buffer length of "+c.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=n;var h=o.details;if("undefined"===typeof h||h.live&&this.levelLastLoaded!==n)return this.state=b,!0;var p=this.fragPrevious;if(!h.live&&p&&p.sn===h.endSN&&r.duration-Math.max(d.end,p.start)<=Math.max(.2,p.duration/2)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(s.default.BUFFER_EOS,v),this.state=_,!0}return this._fetchPayloadOrEos(a,d,h)}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var a=this.fragPrevious,n=this.level,i=r.fragments,o=i.length;if(0===o)return!1;var s=i[0].start,l=i[o-1].start+i[o-1].duration,u=t.end,d=void 0;if(r.live){var c=this.config.initialLiveManifestSize;if(o<c)return f.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+c),!1;if(null===(d=this._ensureFragmentAtLivePoint(r,u,s,l,a,i,o)))return!1}else u<s&&(d=i[0]);return d||(d=this._findFragment(s,a,o,i,u,l,r)),!d||this._loadFragmentOrKey(d,n,r,e,u)}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,a,n,i,o){var s=this.hls.config,l=this.media,u=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-s.maxFragLookUpTolerance,a-d)){var c=this.liveSyncPosition=this.computeLivePosition(r,e);f.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c)}if(e.PTSKnown&&t>a&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(n){var h=n.sn+1;h>=e.startSN&&h<=e.endSN&&(u=i[h-e.startSN],f.logger.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=i[Math.min(o-1,Math.round(o/2))],f.logger.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u}},{key:"_findFragment",value:function(e,t,r,a,i,o,s){var l=this.hls.config,u=void 0,d=void 0,c=l.maxFragLookUpTolerance;if(i<o?(i>o-c&&(c=0),d=n.default.search(a,(function(e){return e.start+e.duration-c<=i?1:e.start-c>i&&e.start?-1:0}))):d=a[r-1],d&&(u=d,d.start,t&&u.level===t.level&&u.sn===t.sn))if(u.sn<s.endSN){var h=t.deltaPTS,p=u.sn-s.startSN;h&&h>l.maxBufferHole&&t.dropped&&p?(u=a[p-1],f.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=a[p+1],f.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;return u}},{key:"_loadFragmentOrKey",value:function(e,t,r,a,n){var i=this.hls,l=i.config;if(null==e.decryptdata.uri||null!=e.decryptdata.key){if(f.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+a.toFixed(3)+",bufferEnd:"+n.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var u=l.fragLoadingLoopThreshold;if(e.loadCounter>u&&Math.abs(this.fragLoadIdx-e.loadIdx)<u)return i.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e}),!1}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,this.nextLoadPosition=e.start+e.duration,e.autoLevel=i.autoLevelEnabled,e.bitrateTest=this.bitrateTest,i.trigger(s.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new o.default(i,"main")),this.state=y,!0}f.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=g,i.trigger(s.default.KEY_LOADING,{frag:e})}},{key:"getBufferRange",value:function(e){return n.default.search(this.bufferRange,(function(t){return e<t.start?-1:e>t.end?1:0}))}},{key:"followingBufferRange",value:function(e){return e?this.getBufferRange(e.end+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),i.default.isBuffered(r,t)?e=this.getBufferRange(t):i.default.isBuffered(r,t+.1)&&(e=this.getBufferRange(t+.1)),e)){var a=e.frag;a!==this.fragPlaying&&(this.fragPlaying=a,this.hls.trigger(s.default.FRAG_CHANGED,{frag:a}))}}},{key:"immediateLevelSwitch",value:function(){if(f.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,i.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t,r=void 0,a=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,(t=this.getBufferRange(e.currentTime))&&t.start>1&&this.flushMainBuffer(0,t.start-1),e.paused)r=0;else{var n=this.hls.nextLoadLevel,i=this.levels[n],o=this.fragLastKbps;r=o&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*o)+1:0}if((a=this.getBufferRange(e.currentTime+r))&&(a=this.followingBufferRange(a))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(a.start,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=T;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(s.default.BUFFER_FLUSHING,r)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(f.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.loadCounter=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;if(f.logger.log("media seeking to "+t.toFixed(3)),this.state===y){var a=this.mediaBuffer?this.mediaBuffer:e,n=i.default.bufferInfo(a,t,this.config.maxBufferHole),o=this.fragCurrent;if(0===n.len&&o){var s=r.maxFragLookUpTolerance,l=o.start-s,u=o.start+o.duration+s;t<l||t>u?(o.loader&&(f.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=v):f.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===_&&(this.state=v);e&&(this.lastCurrentTime=t),this.state!==y&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){f.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){f.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){f.logger.log("trigger BUFFER_RESET"),this.hls.trigger(s.default.BUFFER_RESET),this.bufferRange=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,a=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(a=!0))})),this.audioCodecSwitch=r&&a,this.audioCodecSwitch&&f.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var n=this.config;n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,a=this.levels[r],n=t.totalduration,i=0;if(f.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+n),this.levelLastLoaded=r,t.live){var o=a.details;o&&t.fragments.length>0?(u.default.mergeDetails(o,t),i=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(i,o),t.PTSKnown?f.logger.log("live playlist sliding:"+i.toFixed(3)):f.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,f.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(a.details=t,this.hls.trigger(s.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=t.startTimeOffset;isNaN(l)?t.live?(this.startPosition=this.computeLivePosition(i,t),f.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(l<0&&(f.logger.log("negative start time offset "+l+", count from end of last fragment"),l=i+n+l),f.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===b&&(this.state=v),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===g&&(this.state=v,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===y&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var a=e.stats,n=this.levels[t.level],i=n.details;if(f.logger.log("Loaded  "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t.level),this.bitrateTest=!1,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=v,this.startFragRequested=!1,a.tparsed=a.tbuffered=performance.now(),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else{this.state=E,this.stats=a;var l=i.totalduration,u=isNaN(t.startDTS)?t.start:t.startDTS,d=t.level,c=t.sn,h=this.config.defaultAudioCodec||n.audioCodec;this.audioCodecSwap&&(f.logger.log("swapping playlist audio codec"),void 0===h&&(h=this.lastAudioCodec),h&&(h=-1!==h.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,f.logger.log("Parsing "+c+" of ["+i.startSN+" ,"+i.endSN+"],level "+d+", cc "+t.cc);var p=this.demuxer;p||(p=this.demuxer=new o.default(this.hls,"main"));var g=this.media,m=!(g&&g.seeking)&&(i.PTSKnown||!i.live);p.push(e.payload,h,n.videoCodec,u,t.cc,d,c,l,t.decryptdata,m,null)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===E){var r,a,n=e.tracks;if(n.audio&&this.altAudio&&delete n.audio,a=n.audio){var i=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();i&&this.audioCodecSwap&&(f.logger.log("swapping playlist audio codec"),i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===o.indexOf("firefox")&&(i="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==a.container&&(i="mp4a.40.2",f.logger.log("Android: force audio codec to "+i)),a.levelCodec=i,a.id=e.id}if((a=n.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),e.unique){var l={codec:"",levelCodec:""};for(r in e.tracks)a=n[r],l.container=a.container,l.codec&&(l.codec+=",",l.levelCodec+=","),a.codec&&(l.codec+=a.codec),a.levelCodec&&(l.levelCodec+=a.levelCodec);n={audiovideo:l}}for(r in this.hls.trigger(s.default.BUFFER_CODECS,n),n){a=n[r],f.logger.log("main track:"+r+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var u=a.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent;if(r&&"main"===e.id&&e.sn===r.sn&&e.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===E){var a=this.levels[this.level],n=this.fragCurrent;f.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0));var i=u.default.updateFragPTSDTS(a.details,n.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),o=this.hls;o.trigger(s.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:i,type:e.type,start:e.startPTS,end:e.endPTS}),"video"===e.type&&(n.dropped=e.dropped),[e.data1,e.data2].forEach((function(r){r&&(t.appended=!0,t.pendingBuffering=!0,o.trigger(s.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===E&&(this.stats.tparsed=performance.now(),this.state=k,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){f.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a.loader&&(f.logger.log("switching to main audio track, cancel main fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v}var n=this.hls;n.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var a=this.videoBuffer;a&&this.mediaBuffer!==a&&(f.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=a)}this.altAudio=r,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,r=void 0,a=void 0,n=!1;for(var i in t){var o=t[i];"main"===o.id?(a=i,r=o,"video"===i&&(this.videoBuffer=t[i].buffer)):n=!0}n&&r?(f.logger.log("alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==E&&t!==k||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){var e=this;if(this.state===k&&(!this.appended||!this.pendingBuffering)){var t=this.fragCurrent;t&&function(){var r=e.mediaBuffer?e.mediaBuffer:e.media;f.logger.log("main buffered : "+d.default.toString(r.buffered));var a=e.bufferRange.filter((function(e){return i.default.isBuffered(r,(e.start+e.end)/2)}));a.push({type:t.type,start:t.startPTS,end:t.endPTS,frag:t}),e.bufferRange=a.sort((function(e,t){return e.start-t.start})),e.fragPrevious=t;var n=e.stats;n.tbuffered=performance.now(),e.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),e.hls.trigger(s.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),e.state=v}(),this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=this.media,a=r&&i.default.isBuffered(r,r.currentTime)&&i.default.isBuffered(r,r.currentTime+.5);switch(e.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var o=this.config;if(n<=o.fragLoadingMaxRetry||a||t.autoLevel&&t.level){this.fragLoadError=n,t.loadCounter=0;var l=Math.min(Math.pow(2,n-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);f.logger.warn("mediaController: frag loading failed, retry in "+l+" ms"),this.retryDate=performance.now()+l,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=m}else f.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(s.default.ERROR,e),this.state=S}break;case c.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(a?(this._reduceMaxBufferLength(t.duration),this.state=v):t.autoLevel&&0!==t.level||(e.fatal=!0,this.hls.trigger(s.default.ERROR,e),this.state=S));break;case c.ErrorDetails.LEVEL_LOAD_ERROR:case c.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==S&&(e.fatal?(this.state=S,f.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):this.state===b&&(this.state=v));break;case c.ErrorDetails.BUFFER_FULL_ERROR:this.state!==E&&this.state!==k||(a?(this._reduceMaxBufferLength(t.duration),this.state=v):(f.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,f.logger.warn("reduce max buffer length to "+t.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,a=r.buffered;if(this.loadedmetadata||!a.length||e.seeking)if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var n=i.default.bufferInfo(e,t,0),o=!(e.paused||e.ended||0===e.buffered.length),l=t!==this.lastCurrentTime,u=this.config;if(l)this.stallReported&&(f.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(o){var d=performance.now(),h=this.hls;if(this.stalled){var p=d-this.stalled,v=n.len,g=this.nudgeRetry||0;if(v<=.5&&p>1e3*u.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,f.logger.warn("playback stalling in low buffer @"+t),h.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:v}));var y=n.nextStart,m=y-t;if(y&&m<u.maxSeekHole&&m>0){this.nudgeRetry=++g;var b=g*u.nudgeOffset;f.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+y+" + nudge "+b),e.currentTime=y+b,this.stalled=void 0,h.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:y+b-t})}}else if(v>.5&&p>1e3*u.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,f.logger.warn("playback stalling in high buffer @"+t),h.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:v})),this.stalled=void 0,this.nudgeRetry=++g,g<u.nudgeMaxRetry){var E=e.currentTime,k=E+g*u.nudgeOffset;f.logger.log("adjust currentTime from "+E+" to "+k),e.currentTime=k,h.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else f.logger.error("still stuck in high buffer @"+t+" after "+u.nudgeMaxRetry+", raise fatal error"),h.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=d,this.stallReported=!1}}else{this.loadedmetadata=!0;var T=this.startPosition,_=i.default.isBuffered(r,T);t===T&&_||(f.logger.log("target start position:"+T),_||(T=a.start(0),f.logger.log("target start position not buffered, seek to buffered.start(0) "+T)),f.logger.log("adjust currentTime from "+t+" to "+T),e.currentTime=T)}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=v,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferRange=this.bufferRange.filter((function(t){return i.default.isBuffered(e,(t.start+t.end)/2)})),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=v,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,f.logger.log("main stream:"+t+"->"+e),this.hls.trigger(s.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferRange(e.currentTime);if(t)return t.frag.level}return-1}},{key:"nextBufferRange",get:function(){var e=this.media;return e?this.followingBufferRange(this.getBufferRange(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferRange;return e?e.frag.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(l.default);r.default=R},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=s(e(28)),i=s(e(27)),o=s(e(42));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.MEDIA_ATTACHING,n.default.MEDIA_DETACHING,n.default.FRAG_PARSING_USERDATA,n.default.MANIFEST_LOADING,n.default.FRAG_LOADED,n.default.LEVEL_SWITCH));if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.config.enableCEA708Captions){var a=r,i=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(a){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},s={newCue:function(e,t,r){if(!a.textTrack1){var n=a.getExistingTrack("1");n?(a.textTrack1=n,a.clearCurrentCues(a.textTrack1),i(a.textTrack1,a.media)):(a.textTrack1=a.createTextTrack("captions","English","en"),a.textTrack1.textTrack1=!0)}a.Cues.newCue(a.textTrack1,e,t,r)}},l={newCue:function(e,t,r){if(!a.textTrack2){var n=a.getExistingTrack("2");n?(a.textTrack2=n,a.clearCurrentCues(a.textTrack2),i(a.textTrack2,a.media)):(a.textTrack2=a.createTextTrack("captions","Spanish","es"),a.textTrack2.textTrack2=!0)}a.Cues.newCue(a.textTrack2,e,t,r)}};r.cea608Parser=new o.default(0,s,l)}return r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"clearCurrentCues",value:function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var a=t.textTracks[r];if(!0===a["textTrack"+e])return a}return null}},{key:"createTextTrack",value:function(e,t,r){if(this.media)return this.media.addTextTrack(e,t,r)}},{key:"destroy",value:function(){i.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastPts=Number.NEGATIVE_INFINITY}},{key:"onLevelSwitch",value:function(){"NONE"===this.hls.currentLevel.closedCaptions?this.enabled=!1:this.enabled=!0}},{key:"onFragLoaded",value:function(e){if("main"===e.frag.type){var t=e.frag.start;t<=this.lastPts&&(this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)),this.lastPts=t}}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}}},{key:"extractCea608Data",value:function(e){for(var t,r,a,n=31&e[0],i=2,o=[],s=0;s<n;s++)t=e[i++],r=127&e[i++],a=127&e[i++],0===r&&0===a||0!==(4&t)&&0===(3&t)&&(o.push(r),o.push(a));return o}}]),t}(i.default);r.default=l},{27:27,28:28,42:42}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=r}return a(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();r.default=n},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return a(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),a=0;a<r.length;a++)r[a]=t.getUint32(4*a);return r}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix[0],a=this.subMix[1],n=this.subMix[2],i=this.subMix[3],o=this.invSubMix[0],s=this.invSubMix[1],l=this.invSubMix[2],u=this.invSubMix[3],d=new Uint32Array(256),c=0,f=0,h=0;for(h=0;h<256;h++)d[h]=h<128?h<<1:h<<1^283;for(h=0;h<256;h++){var p=f^f<<1^f<<2^f<<3^f<<4;p=p>>>8^255&p^99,e[c]=p,t[p]=c;var v=d[c],g=d[v],y=d[g],m=257*d[p]^16843008*p;r[c]=m<<24|m>>>8,a[c]=m<<16|m>>>16,n[c]=m<<8|m>>>24,i[c]=m,m=16843009*y^65537*g^257*v^16843008*c,o[p]=m<<24|m>>>8,s[p]=m<<16|m>>>16,l[p]=m<<8|m>>>24,u[p]=m,c?(c=v^d[d[d[y^v]]],f^=d[d[f]]):c=f=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,a=0;a<t.length&&r;)r=t[a]===this.key[a],a++;if(!r){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var i=this.ksRows=4*(n+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(this.ksRows),u=this.invKeySchedule=new Uint32Array(this.ksRows),d=this.sBox,c=this.rcon,f=this.invSubMix[0],h=this.invSubMix[1],p=this.invSubMix[2],v=this.invSubMix[3],g=void 0,y=void 0;for(o=0;o<i;o++)o<n?g=l[o]=t[o]:(y=g,o%n===0?(y=d[(y=y<<8|y>>>24)>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y],y^=c[o/n|0]<<24):n>6&&o%n===4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y]),l[o]=g=(l[o-n]^y)>>>0);for(s=0;s<i;s++)o=i-s,y=3&s?l[o]:l[o-4],u[s]=s<4||o<=4?y:f[d[y>>>24]]^h[d[y>>>16&255]]^p[d[y>>>8&255]]^v[d[255&y]],u[s]=u[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var a,n,i=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,l=this.invSubMix[0],u=this.invSubMix[1],d=this.invSubMix[2],c=this.invSubMix[3],f=this.uint8ArrayToUint32Array_(r),h=f[0],p=f[1],v=f[2],g=f[3],y=new Int32Array(e),m=new Int32Array(y.length),b=void 0,E=void 0,k=void 0,T=void 0,_=void 0,S=void 0,R=void 0,A=void 0,w=void 0,O=void 0,C=void 0,P=void 0;t<y.length;){for(w=this.networkToHostOrderSwap(y[t]),O=this.networkToHostOrderSwap(y[t+1]),C=this.networkToHostOrderSwap(y[t+2]),P=this.networkToHostOrderSwap(y[t+3]),_=w^o[0],S=P^o[1],R=C^o[2],A=O^o[3],a=4,n=1;n<i;n++)b=l[_>>>24]^u[S>>16&255]^d[R>>8&255]^c[255&A]^o[a],E=l[S>>>24]^u[R>>16&255]^d[A>>8&255]^c[255&_]^o[a+1],k=l[R>>>24]^u[A>>16&255]^d[_>>8&255]^c[255&S]^o[a+2],T=l[A>>>24]^u[_>>16&255]^d[S>>8&255]^c[255&R]^o[a+3],_=b,S=E,R=k,A=T,a+=4;b=s[_>>>24]<<24^s[S>>16&255]<<16^s[R>>8&255]<<8^s[255&A]^o[a],E=s[S>>>24]<<24^s[R>>16&255]<<16^s[A>>8&255]<<8^s[255&_]^o[a+1],k=s[R>>>24]<<24^s[A>>16&255]<<16^s[_>>8&255]<<8^s[255&S]^o[a+2],T=s[A>>>24]<<24^s[_>>16&255]<<16^s[S>>8&255]<<8^s[255&R]^o[a+3],a+=3,m[t]=this.networkToHostOrderSwap(b^h),m[t+1]=this.networkToHostOrderSwap(T^p),m[t+2]=this.networkToHostOrderSwap(k^v),m[t+3]=this.networkToHostOrderSwap(E^g),h=w,p=O,v=C,g=P,t+=4}return m.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();r.default=n},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=u(e(14)),i=u(e(17)),o=u(e(15)),s=e(26),l=e(45);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=r;try{var a=crypto||self.crypto;this.subtle=a.subtle||a.webkitSubtle}catch(n){}this.disableWebCrypto=!this.subtle}return a(e,[{key:"decrypt",value:function(e,t,r,a){var s=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){l.logger.log("JS AES decrypt");var u=this.decryptor;u||(this.decryptor=u=new o.default),u.expandKey(t),a(u.decrypt(e,0,r))}else!function(){l.logger.log("WebCrypto AES decrypt");var o=s.subtle;s.key!==t&&(s.key=t,s.fastAesKey=new i.default(o,t)),s.fastAesKey.expandKey().then((function(t){new n.default(o,r).decrypt(e,t).then((function(e){a(e)}))})).catch((function(n){s.onWebCryptoError(n,e,t,r,a)}))}()}},{key:"onWebCryptoError",value:function(e,t,r,a,n){this.config.enableSoftwareAES?(l.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.decrypt(t,r,a,n)):(l.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();r.default=d},{14:14,15:15,17:17,26:26,45:45}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=r}return a(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();r.default=n},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=s(e(19)),i=e(45),o=s(e(24));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,r,a,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.id=r,this.remuxerClass=a,this.config=n,this.remuxer=new this.remuxerClass(t,r,n,i),this.insertDiscontinuity()}return a(e,[{key:"insertDiscontinuity",value:function(){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0}}},{key:"push",value:function(e,t,r,a,s,l,u,d,c,f){var h,p,v,g,y,m,b,E,k,T,_=new o.default(e),S=90*_.timeStamp,R=!1;for(s!==this.lastCC?(i.logger.log(this.id+" discontinuity detected"),this.lastCC=s,this.insertDiscontinuity(),this.remuxer.switchLevel(),this.remuxer.insertDiscontinuity()):l!==this.lastLevel?(i.logger.log("audio track switch detected"),this.lastLevel=l,this.remuxer.switchLevel(),this.insertDiscontinuity()):u===this.lastSN+1&&(R=!0),h=this._aacTrack,this.lastSN=u,this.lastLevel=l,m=_.length,k=e.length;m<k-1&&(255!==e[m]||240!==(240&e[m+1]));m++);for(h.audiosamplerate||(p=n.default.getAudioConfig(this.observer,e,m,t),h.config=p.config,h.audiosamplerate=p.samplerate,h.channelCount=p.channelCount,h.codec=p.codec,h.manifestCodec=p.manifestCodec,h.duration=d,i.logger.log("parsed codec:"+h.codec+",rate:"+p.samplerate+",nb channel:"+p.channelCount)),y=0,g=9216e4/h.audiosamplerate;m+5<k&&(b=1&e[m+1]?7:9,v=(3&e[m+3])<<11|e[m+4]<<3|(224&e[m+5])>>>5,(v-=b)>0&&m+b+v<=k);)for(E=S+y*g,T={unit:e.subarray(m+b,m+b+v),pts:E,dts:E},h.samples.push(T),h.len+=v,m+=v+b,y++;m<k-1&&(255!==e[m]||240!==(240&e[m+1]));m++);this.remuxer.remux(l,u,s,h,{samples:[]},{samples:[{pts:S,dts:S,unit:_.payload}]},{samples:[]},a,R,c,f)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,a=new o.default(e);if(a.hasTimeStamp)for(t=a.length,r=e.length;t<r-1;t++)if(255===e[t]&&240===(240&e[t+1]))return!0;return!1}}]),e}();r.default=l},{19:19,24:24,45:45}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=e(45),i=e(26),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"getAudioConfig",value:function(e,t,r,a){var o,s,l,u,d,c=navigator.userAgent.toLowerCase(),f=a,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),!((s=(60&t[r+2])>>>2)>h.length-1))return u=(1&t[r+2])<<2,u|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+u),/firefox/i.test(c)?s>=6?(o=5,d=new Array(4),l=s-3):(o=2,d=new Array(2),l=s):-1!==c.indexOf("android")?(o=2,d=new Array(2),l=s):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&s>=6?l=s-3:((a&&-1!==a.indexOf("mp4a.40.2")&&s>=6&&1===u||!a&&1===u)&&(o=2,d=new Array(2)),l=s)),d[0]=o<<3,d[0]|=(14&s)>>1,d[1]|=(1&s)<<7,d[1]|=u<<3,5===o&&(d[1]|=(14&l)>>1,d[2]=(1&l)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[s],channelCount:u,codec:"mp4a.40."+o,manifestCodec:f};e.trigger(Event.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s})}}]),e}();r.default=o},{26:26,45:45}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=c(e(28)),i=e(26),o=c(e(16)),s=c(e(18)),l=c(e(25)),u=c(e(38)),d=c(e(39));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function(){function e(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.hls=t,this.id=r,this.config=this.hls.config||n,this.typeSupported=a}return a(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,r,a,i,s,l,u,d,c,f){if(e.byteLength>0&&null!=d&&null!=d.key&&"AES-128"===d.method){null==this.decrypter&&(this.decrypter=new o.default(this.hls,this.config));var h,p=this;try{h=performance.now()}catch(v){h=Date.now()}this.decrypter.decrypt(e,d.key.buffer,d.iv.buffer,(function(e){var o;try{o=performance.now()}catch(v){o=Date.now()}p.hls.trigger(n.default.FRAG_DECRYPTED,{level:s,sn:l,stats:{tstart:h,tdecrypt:o}}),p.pushDecrypted(new Uint8Array(e),t,r,a,i,s,l,u,c,f)}))}else this.pushDecrypted(new Uint8Array(e),t,r,a,i,s,l,u,c,f)}},{key:"pushDecrypted",value:function(e,t,r,a,o,c,f,h,p,v){var g=this.demuxer;if(!g||o!==this.cc&&!g.probe(e)){var y=this.hls,m=this.id,b=this.config,E=this.typeSupported;if(l.default.probe(e))(g=!0===this.typeSupported.mp2t?new l.default(y,m,d.default,b,E):new l.default(y,m,u.default,b,E)).probe=l.default.probe;else{if(!s.default.probe(e))return void y.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,id:m,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});(g=new s.default(y,m,u.default,b,E)).probe=s.default.probe}this.demuxer=g}g.push(e,t,r,a,o,c,f,h,p,v),this.cc=o}}]),e}();r.default=h},{16:16,18:18,25:25,26:26,28:28,38:38,39:39}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=s(e(20)),n=s(e(28)),i=e(45),o=s(e(1));function s(e){return e&&e.__esModule?e:{default:e}}r.default=function(e){var t=new o.default;t.trigger=function(e){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(a))},t.off=function(e){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(a))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(n){var o=n.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new a.default(t,o.id,o.typeSupported,s);try{(0,i.enableLogs)(!0===s.debug)}catch(l){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":e.demuxer.push(o.data,o.audioCodec,o.videoCodec,o.timeOffset,o.cc,o.level,o.sn,o.duration,o.decryptdata,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(n.default.FRAG_DECRYPTED,r),t.on(n.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(n.default.FRAG_PARSED,r),t.on(n.default.ERROR,r),t.on(n.default.FRAG_PARSING_METADATA,r),t.on(n.default.FRAG_PARSING_USERDATA,r),t.on(n.default.INIT_PTS_FOUND,r),t.on(n.default.FRAG_PARSING_DATA,(function(t,r){var a=r.data1.buffer,n=r.data2.buffer;delete r.data1,delete r.data2,e.postMessage({event:t,data:r,data1:a,data2:n},[a,n])}))}},{1:1,20:20,28:28,45:45}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=u(e(28)),i=u(e(20)),o=u(e(21)),s=e(45),l=e(26);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function t(r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=r,this.id=a;var u={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:r.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')};if(r.config.enableWorker&&"undefined"!==typeof Worker){s.logger.log("demuxing in webworker");var d=void 0;try{var c=e(3);d=this.w=c(o.default),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(e){r.trigger(n.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:u,id:a,config:JSON.stringify(r.config)})}catch(f){s.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&URL.revokeObjectURL(d.objectURL),this.demuxer=new i.default(r,a,u),this.w=void 0}}else this.demuxer=new i.default(r,a,u);this.demuxInitialized=!0}return a(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}}},{key:"push",value:function(e,t,r,a,n,i,o,s,l,u,d){var c=this.w;if(c)c.postMessage({cmd:"demux",data:e,audioCodec:t,videoCodec:r,timeOffset:a,cc:n,level:i,sn:o,duration:s,decryptdata:l,accurateTimeOffset:u,defaultInitPTS:d},[e]);else{var f=this.demuxer;f&&f.push(e,t,r,a,n,i,o,s,l,u,d)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case n.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data.data2=new Uint8Array(t.data2);default:r.trigger(t.event,t.data)}}}]),t}();r.default=d},{20:20,21:21,26:26,28:28,3:3,45:45}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=e(45),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return a(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,a=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error("no bytes available");a.set(e.subarray(r,r+n)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,r=8,a=8;for(t=0;t<e;t++)0!==a&&(a=(r+this.readEG()+256)%256),r=0===a?r:a}},{key:"readSPS",value:function(){var e,t,r,a,n,i,o,s=0,l=0,u=0,d=0,c=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),y=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(c(),e=c(),f(5),v(3),c(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&&v(1),y(),y(),v(1),p())for(i=3!==b?8:12,o=0;o<i;o++)p()&&m(o<6?16:64)}y();var E=h();if(0===E)h();else if(1===E)for(v(1),g(),g(),t=h(),o=0;o<t;o++)g();y(),v(1),r=h(),a=h(),0===(n=f(1))&&v(1),v(1),p()&&(s=h(),l=h(),u=h(),d=h());var k=[1,1];if(p()&&p())switch(c()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-n)*(a+1)*16-(n?2:4)*(u+d),pixelRatio:k}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();r.default=i},{45:45}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=e(45),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hasTimeStamp=!1;for(var r,a,i,o,s,l,u,d=0;;)if(l=this.readUTF(t,d,3),d+=3,"ID3"===l)d+=3,r=127&t[d++],a=127&t[d++],i=127&t[d++],o=127&t[d++],s=d+((r<<21)+(a<<14)+(i<<7)+o),this._parseID3Frames(t,d,s),d=s;else{if("3DI"!==l)return void((u=d-=3)&&(this.hasTimeStamp||n.logger.warn("ID3 tag found, but no timestamp"),this._length=u,this._payload=t.subarray(0,u)));d+=7,n.logger.log("3DI footer found, end: "+d)}}return a(e,[{key:"readUTF",value:function(e,t,r){var a="",n=t,i=t+r;do{a+=String.fromCharCode(e[n++])}while(n<i);return a}},{key:"_parseID3Frames",value:function(e,t,r){for(var a,i;t+8<=r;)switch(a=this.readUTF(e,t,4),t+=4,e[t++],e[t++],e[t++],e[t++],e[t++],e[t++],a){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var o=1&e[t++];this._hasTimeStamp=!0,i=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,o&&(i+=47721858.84),i=Math.round(i),n.logger.trace("ID3 timestamp found: "+i),this._timeStamp=i}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();r.default=i},{45:45}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=u(e(19)),i=u(e(28)),o=u(e(23)),s=e(45),l=e(26);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t,r,a,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.id=r,this.remuxerClass=a,this.config=n,this.typeSupported=i,this.lastCC=0,this.remuxer=new this.remuxerClass(t,r,n,i)}return a(e,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(e,t,r,a,n,o,u,d,c,f){var h,p,v,g,y,m=e.length,b=this.remuxer.passthrough,E=!1;this.audioCodec=t,this.videoCodec=r,this._duration=d,this.contiguous=!1,this.accurateTimeOffset=c,n!==this.lastCC&&(s.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=n),o!==this.lastLevel?(s.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=o):u===this.lastSN+1&&(this.contiguous=!0),this.lastSN=u;var k=this.pmtParsed,T=this._avcTrack,_=this._audioTrack,S=this._id3Track,R=T.id,A=_.id,w=S.id,O=this._pmtId,C=T.pesData,P=_.pesData,L=S.pesData,D=this._parsePAT,M=this._parsePMT,x=this._parsePES,I=this._parseAVCPES.bind(this),N=this._parseAACPES.bind(this),F=this._parseMPEGPES.bind(this),U=this._parseID3PES.bind(this);for(m-=m%188,h=0;h<m;h+=188)if(71===e[h]){if(p=!!(64&e[h+1]),v=((31&e[h+1])<<8)+e[h+2],(48&e[h+3])>>4>1){if((g=h+5+e[h+4])===h+188)continue}else g=h+4;switch(v){case R:if(p){if(C&&(y=x(C))&&(I(y,!1),b&&T.codec&&(-1===A||_.codec)))return void this.remux(o,u,n,e,a);C={data:[],size:0}}C&&(C.data.push(e.subarray(g,h+188)),C.size+=h+188-g);break;case A:if(p){if(P&&(y=x(P))&&(_.isAAC?N(y):F(y),b&&_.codec&&(-1===R||T.codec)))return void this.remux(o,u,n,e,a);P={data:[],size:0}}P&&(P.data.push(e.subarray(g,h+188)),P.size+=h+188-g);break;case w:p&&(L&&(y=x(L))&&U(y),L={data:[],size:0}),L&&(L.data.push(e.subarray(g,h+188)),L.size+=h+188-g);break;case 0:p&&(g+=e[g]+1),O=this._pmtId=D(e,g);break;case O:p&&(g+=e[g]+1);var B=M(e,g,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3);(R=B.avc)>0&&(T.id=R),(A=B.audio)>0&&(_.id=A,_.isAAC=B.isAAC),(w=B.id3)>0&&(S.id=w),E&&!k&&(s.logger.log("reparse from beginning"),E=!1,h=-188),k=this.pmtParsed=!0;break;case 17:case 8191:break;default:E=!0}}else this.observer.trigger(i.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,id:this.id,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});C&&(y=x(C))?(I(y,!0),T.pesData=null):T.pesData=C,P&&(y=x(P))?(_.isAAC?N(y):F(y),_.pesData=null):(P&&P.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),_.pesData=P),L&&(y=x(L))?(U(y),S.pesData=null):S.pesData=L,this.remux(o,u,n,null,a,f)}},{key:"remux",value:function(e,t,r,a,n,i){for(var o=this._avcTrack,s=o.samples,l=0,u=0,d=0;d<s.length;d++){for(var c=s[d],f=c.units.units,h=f.length,p=0,v=0;v<h;v++)p+=f[v].data.length;u+=p,l+=h,c.length=p}o.len=u,o.nbNalu=l,this.remuxer.remux(e,t,r,this._audioTrack,this._avcTrack,this._id3Track,this._txtTrack,n,this.contiguous,this.accurateTimeOffset,i,a)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r){var a,n,i={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){switch(n=(31&e[t+1])<<8|e[t+2],e[t]){case 15:-1===i.audio&&(i.audio=n);break;case 21:-1===i.id3&&(i.id3=n);break;case 27:-1===i.avc&&(i.avc=n);break;case 3:case 4:r?-1===i.audio&&(i.audio=n,i.isAAC=!1):s.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:s.logger.warn("HEVC stream type found, not supported for now");break;default:s.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return i}},{key:"_parsePES",value:function(e){var t,r,a,n,i,o,l,u,d=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var f=new Uint8Array(c[0].length+c[1].length);f.set(c[0]),f.set(c[1],c[0].length),c[0]=f,c.splice(1,1)}if(1===((t=c[0])[0]<<16)+(t[1]<<8)+t[2]){if((a=(t[4]<<8)+t[5])&&a>e.size-6)return null;192&(r=t[7])&&((o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(o-=8589934592),64&r?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),o-l>54e5&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l)):l=o),u=(n=t[8])+9,e.size-=u,i=new Uint8Array(e.size);for(var h=0,p=c.length;h<p;h++){var v=(t=c[h]).byteLength;if(u){if(u>v){u-=v;continue}t=t.subarray(u),v-=u,u=0}i.set(t,d),d+=v}return a&&(a-=n+3),{data:i,pts:o,dts:l,len:a}}return null}},{key:"pushAccesUnit",value:function(e,t){e.units.units.length&&e.frame&&(!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(t.samples.length||this.contiguous)?t.samples.push(e):t.dropped++),e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug+","+e.units.length)}},{key:"_parseAVCPES",value:function(e,t){var r,a,n,i=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),u=this.avcSample;e.data=null,l.forEach((function(t){switch(t.type){case 1:a=!0,u.frame=!0;var l=t.data;if(l.length>4){var d=new o.default(l).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:a=!0,u||(u=i.avcSample=i._createAVCSample(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:a=!0,(r=new o.default(i.discardEPB(t.data))).readUByte();for(var c=0,f=0,h=!1,p=0;!h&&r.bytesAvailable>1;){c=0;do{c+=p=r.readUByte()}while(255===p);f=0;do{f+=p=r.readUByte()}while(255===p);if(4===c&&0!==r.bytesAvailable){if(h=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var v=r.readUByte(),g=31&v,y=[v,r.readUByte()];for(n=0;n<g;n++)y.push(r.readUByte()),y.push(r.readUByte()),y.push(r.readUByte());i._insertSampleInOrder(i._txtTrack.samples,{type:3,pts:e.pts,bytes:y})}}else if(f<r.bytesAvailable)for(n=0;n<f;n++)r.readUByte()}break;case 7:if(a=!0,!s.sps){var m=(r=new o.default(t.data)).readSPS();s.width=m.width,s.height=m.height,s.pixelRatio=m.pixelRatio,s.sps=[t.data],s.duration=i._duration;var b=t.data.subarray(1,4),E="avc1.";for(n=0;n<3;n++){var k=b[n].toString(16);k.length<2&&(k="0"+k),E+=k}s.codec=E}break;case 8:a=!0,s.pps||(s.pps=[t.data]);break;case 9:a=!1,u&&i.pushAccesUnit(u,s),u=i.avcSample=i._createAVCSample(!1,e.pts,e.dts,"");break;case 12:a=!1;break;default:a=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&a&&u.units.units.push(t)})),t&&u&&(this.pushAccesUnit(u,s),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,r,a){return{key:e,pts:t,dts:r,units:{units:[],length:0},debug:a}}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var a=r-1;a>=0;a--)if(t.pts<e[a].pts){e.splice(a,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.units.length){var r=this._avcTrack.samples;e=r[r.length-1]}if(e){var a=e.units.units;t=a[a.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,r,a,n,i=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,d=[],c=-1;for(-1===l&&(c=0,n=31&e[0],l=0,i=1);i<o;)if(t=e[i++],l)if(1!==l)if(t)if(1===t){if(c>=0)a={data:e.subarray(c,i-l-1),type:n},d.push(a);else{var f=this._getLastNalUnit();if(f&&(u&&i<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(r=i-l-1)>0)){var h=new Uint8Array(f.data.byteLength+r);h.set(f.data,0),h.set(e.subarray(0,r),f.data.byteLength),f.data=h}}i<o?(c=i,n=31&e[i],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(c>=0&&l>=0&&(a={data:e.subarray(c,o),type:n,state:l},d.push(a)),0===d.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return s.naluState=l,d}},{key:"discardEPB",value:function(e){for(var t,r,a=e.byteLength,n=[],i=1;i<a-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;t=a-n.length,r=new Uint8Array(t);var o=0;for(i=0;i<t;o++,i++)o===n[0]&&(o++,n.shift()),r[i]=e[o];return r}},{key:"_parseAACPES",value:function(e){var t,r,a,o,u,d,c,f,h,p,v,g=this._audioTrack,y=e.data,m=e.pts,b=this.aacOverFlow,E=this.aacLastPTS;if(b){var k=new Uint8Array(b.byteLength+y.byteLength);k.set(b,0),k.set(y,b.byteLength),y=k}for(u=0,f=y.length;u<f-1&&(255!==y[u]||240!==(240&y[u+1]));u++);if(!u||(u<f-1?(p="AAC PES did not start with ADTS header,offset:"+u,v=!1):(p="no ADTS header found in AAC PES",v=!0),s.logger.warn("parsing error:"+p),this.observer.trigger(i.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,id:this.id,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:p}),!v)){if(!g.audiosamplerate){var T=this.audioCodec;t=n.default.getAudioConfig(this.observer,y,u,T),g.config=t.config,g.audiosamplerate=t.samplerate,g.channelCount=t.channelCount,g.codec=t.codec,g.manifestCodec=t.manifestCodec,g.duration=this._duration,s.logger.log("parsed codec:"+g.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)}if(o=0,a=9216e4/g.audiosamplerate,b&&E){var _=E+a;Math.abs(_-m)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((_-m)/90)),m=_)}for(;u+5<f&&(d=1&y[u+1]?7:9,r=(3&y[u+3])<<11|y[u+4]<<3|(224&y[u+5])>>>5,(r-=d)>0&&u+d+r<=f);)for(c=m+o*a,h={unit:y.subarray(u+d,u+d+r),pts:c,dts:c},g.samples.push(h),g.len+=r,u+=r+d,o++;u<f-1&&(255!==y[u]||240!==(240&y[u+1]));u++);b=u<f?y.subarray(u,f):null,this.aacOverFlow=b,this.aacLastPTS=c}}},{key:"_parseMPEGPES",value:function(e){for(var t,r=e.data,a=e.pts,n=r.length,i=0,o=0;o<n&&(t=this._parseMpeg(r,o,n,i++,a))>0;)o+=t}},{key:"_onMpegFrame",value:function(e,t,r,a,n,i){var o=i+n*(1152/r*1e3),s=this._audioTrack;s.config=[],s.channelCount=a,s.audiosamplerate=r,s.duration=this._duration,s.samples.push({unit:e,pts:o,dts:o}),s.len+=e.length}},{key:"_onMpegNoise",value:function(e){s.logger.warn("mpeg audio has noise: "+e.length+" bytes")}},{key:"_parseMpeg",value:function(e,t,r,a,n){if(t+2>r)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>r)return-1;var i=e[t+1]>>3&3,o=e[t+1]>>1&3,s=e[t+2]>>4&15,l=e[t+2]>>2&3,u=!!(2&e[t+2]);if(1!==i&&0!==s&&15!==s&&3!==l){var d=1e3*[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160][14*(3===i?3-o:3===o?3:4)+s-1],c=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3][3*(3===i?0:2===i?1:2)+l],f=u?1:0,h=e[t+3]>>6===3?1:2,p=3===o?(3===i?12:6)*d/c+f<<2:(3===i?144:72)*d/c+f|0;return t+p>r?-1:(this._onMpegFrame&&this._onMpegFrame(e.subarray(t,t+p),d,c,h,a,n),p)}}for(var v=t+2;v<r;){if(255===e[v-1]&&224===(224&e[v]))return this._onMpegNoise&&this._onMpegNoise(e.subarray(t,v-1)),v-t-1;v++}return-1}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();r.default=d},{19:19,23:23,26:26,28:28,45:45}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},{}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=e(45),s=e(26),l=e(28),u=(a=l)&&a.__esModule?a:{default:a};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t){d(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];this.handledEvents=a,this.useGenericHandler=!0,this.registerListeners()}return i(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===n(this.handledEvents)&&this.handledEvents.length&&"function"===typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!==typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(r){o.logger.error("internal error happened while processing "+e+":"+r.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:r})}}}]),e}();r.default=c},{26:26,28:28,45:45}],28:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();r.default=n},{}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"isBuffered",value:function(e,t){if(e)for(var r=e.buffered,a=0;a<r.length;a++)if(t>=r.start(a)&&t<=r.end(a))return!0;return!1}},{key:"bufferInfo",value:function(e,t,r){if(e){var a,n=e.buffered,i=[];for(a=0;a<n.length;a++)i.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(i,t,r)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(e,t,r){var a,n,i,o,s,l=[];for(e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end})),s=0;s<e.length;s++){var u=l.length;if(u){var d=l[u-1].end;e[s].start-d<r?e[s].end>d&&(l[u-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,a=0,n=i=t;s<l.length;s++){var c=l[s].start,f=l[s].end;if(t+r>=c&&t<f)n=c,a=(i=f)-t;else if(t+r<c){o=c;break}}return{len:a,start:n,end:i,nextStart:o}}}]),e}();r.default=n},{}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=e(45),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"mergeDetails",value:function(t,r){var a,i=Math.max(t.startSN,r.startSN)-r.startSN,o=Math.min(t.endSN,r.endSN)-r.startSN,s=r.startSN-t.startSN,l=t.fragments,u=r.fragments,d=0;if(o<i)r.PTSKnown=!1;else{for(var c=i;c<=o;c++){var f=l[s+c],h=u[c];h&&f&&(d=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,a=h))}if(d)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),c=0;c<u.length;c++)u[c].cc+=d;if(a)e.updateFragPTSDTS(r,a.sn,a.startPTS,a.endPTS,a.startDTS,a.endDTS);else if(s>=0&&s<l.length){var p=l[s].start;for(c=0;c<u.length;c++)u[c].start+=p}r.PTSKnown=t.PTSKnown}}},{key:"updateFragPTSDTS",value:function(t,r,a,n,i,o){var s,l,u,d;if(!t||r<t.startSN||r>t.endSN)return 0;if(s=r-t.startSN,u=(l=t.fragments)[s],!isNaN(u.startPTS)){var c=Math.abs(u.startPTS-a);isNaN(u.deltaPTS)?u.deltaPTS=c:u.deltaPTS=Math.max(c,u.deltaPTS),a=Math.min(a,u.startPTS),n=Math.max(n,u.endPTS),i=Math.min(i,u.startDTS),o=Math.max(o,u.endDTS)}var f=a-u.start;for(u.start=u.startPTS=a,u.endPTS=n,u.startDTS=i,u.endDTS=o,u.duration=n-a,d=s;d>0;d--)e.updatePTS(l,d,d-1);for(d=s;d<l.length-1;d++)e.updatePTS(l,d,d+1);return t.PTSKnown=!0,f}},{key:"updatePTS",value:function(e,t,r){var a=e[t],i=e[r],o=i.startPTS;isNaN(o)?i.start=r>t?a.start+a.duration:a.start-i.duration:r>t?(a.duration=o-a.start,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):(i.duration=a.start-o,i.duration<0&&n.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}}]),e}();r.default=i},{45:45}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=T(e(28)),i=e(26),o=T(e(36)),s=T(e(34)),l=T(e(4)),u=T(e(7)),d=T(e(8)),c=T(e(5)),f=T(e(12)),h=T(e(11)),p=T(e(13)),v=T(e(10)),g=T(e(6)),y=e(45),m=T(e(47)),b=T(e(1)),E=T(e(35)),k=T(e(43));function T(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,e);var r=e.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in r)a in t||(t[a]=r[a]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,y.enableLogs)(t.debug),this.config=t;var n=this.observer=new b.default;n.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n.emit.apply(n,[e,e].concat(r))},n.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n.removeListener.apply(n,[e].concat(r))},this.on=n.on.bind(n),this.off=n.off.bind(n),this.trigger=n.trigger.bind(n),this.playlistLoader=new o.default(this),this.fragmentLoader=new s.default(this),this.levelController=new h.default(this),this.abrController=new t.abrController(this),this.bufferController=new t.bufferController(this),this.capLevelController=new t.capLevelController(this),this.fpsController=new t.fpsController(this),this.streamController=new t.streamController(this),this.audioStreamController=new t.audioStreamController(this),this.timelineController=new t.timelineController(this),this.audioTrackController=new g.default(this),this.keyLoader=new E.default(this)}return a(e,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"===typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.6.21"}},{key:"Events",get:function(){return n.default}},{key:"ErrorTypes",get:function(){return i.ErrorTypes}},{key:"ErrorDetails",get:function(){return i.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig||(e.defaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxMaxBufferLength:600,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:m.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:l.default,bufferController:u.default,capLevelController:d.default,fpsController:v.default,streamController:f.default,audioStreamController:c.default,timelineController:p.default,cueHandler:k.default,enableCEA708Captions:!0,enableMP2TPassThrough:!1,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),e.defaultConfig},set:function(t){e.defaultConfig=t}}]),a(e,[{key:"destroy",value:function(){y.logger.log("destroy"),this.trigger(n.default.DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.fpsController.destroy(),this.streamController.destroy(),this.audioStreamController.destroy(),this.timelineController.destroy(),this.audioTrackController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(e){y.logger.log("attachMedia"),this.media=e,this.trigger(n.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){y.logger.log("detachMedia"),this.trigger(n.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){y.logger.log("loadSource:"+e),this.url=e,this.trigger(n.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;y.logger.log("startLoad("+e+")"),this.levelController.startLoad(),this.streamController.startLoad(e),this.audioStreamController.startLoad(e)}},{key:"stopLoad",value:function(){y.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad(),this.audioStreamController.stopLoad()}},{key:"swapAudioCodec",value:function(){y.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){y.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){y.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){y.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){y.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.abrController.minAutoLevel)},set:function(e){y.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){y.logger.log("set startLevel:"+e),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(e){y.logger.log("set autoLevelCapping:"+e),this.abrController.autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"audioTracks",get:function(){return this.audioTrackController.audioTracks}},{key:"audioTrack",get:function(){return this.audioTrackController.audioTrack},set:function(e){this.audioTrackController.audioTrack=e}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}}]),e}();r.default=S},{1:1,10:10,11:11,12:12,13:13,26:26,28:28,34:34,35:35,36:36,4:4,43:43,45:45,47:47,5:5,6:6,7:7,8:8}],33:[function(e,t,r){"use strict";t.exports=e(32).default},{32:32}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=l(e(28)),i=l(e(27)),o=e(26),s=e(45);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.FRAG_LOADING));return r.loaders={},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},i.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,a=this.loaders[r],n=this.hls.config;t.loaded=0,a&&(s.logger.warn("abort previous fragment loader for type:"+r),a.abort()),a=this.loaders[r]=t.loader="undefined"!==typeof n.fLoader?new n.fLoader(n):new n.loader(n);var i,o,l=void 0;l={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,d=t.byteRangeEndOffset;isNaN(u)||isNaN(d)||(l.rangeStart=u,l.rangeEnd=d),i={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},a.load(l,i,o)}},{key:"loadsuccess",value:function(e,t,r){var a=e.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(n.default.FRAG_LOADED,{payload:a,frag:i,stats:t})}},{key:"loaderror",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(n.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(n.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,r){var a=t.frag;a.loaded=e.loaded,this.hls.trigger(n.default.FRAG_LOAD_PROGRESS,{frag:a,stats:e})}}]),t}(i.default);r.default=u},{26:26,27:27,28:28,45:45}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=l(e(28)),i=l(e(27)),o=e(26),s=e(45);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.default.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},i.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,a=this.loaders[r],i=t.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var l,u,d,c=this.hls.config;a&&(s.logger.warn("abort previous key loader for type:"+r),a.abort()),t.loader=this.loaders[r]=new c.loader(c),this.decrypturl=o,this.decryptkey=null,l={url:o,frag:t,responseType:"arraybuffer"},u={timeout:c.fragLoadingTimeOut,maxRetry:c.fragLoadingMaxRetry,retryDelay:c.fragLoadingRetryDelay,maxRetryDelay:c.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(l,u,d)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(n.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){var a=r.frag;this.decryptkey=a.decryptdata.key=new Uint8Array(e.data),a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(n.default.KEY_LOADED,{frag:a})}},{key:"loaderror",value:function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),this.loaders[t.type]=void 0,this.hls.trigger(n.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),this.loaders[t.type]=void 0,this.hls.trigger(n.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),t}(i.default);r.default=u},{26:26,27:27,28:28,45:45}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=d(e(2)),i=d(e(28)),o=d(e(27)),s=e(26),l=d(e(40)),u=e(45);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,p=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,v=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,g=function(){function e(){c(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return a(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=n.default.buildAbsoluteURL(this.baseuri,this.reluri)),this._uri}}]),e}(),y=function(){function e(){c(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return a(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new g).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=n.default.buildAbsoluteURL(this.baseurl,this.relurl)),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),m=function(e){function t(e){c(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MANIFEST_LOADING,i.default.LEVEL_LOADING,i.default.AUDIO_TRACK_LOADING));return r.loaders={},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},o.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var a=r.context;if(a&&a.url===e)return void u.logger.trace("playlist request ongoing");u.logger.warn("abort previous loader for type:"+t.type),r.abort()}var n,i,o=this.hls.config,s=void 0,l=void 0,d=void 0,c=void 0;"manifest"===t.type?(s=o.manifestLoadingMaxRetry,l=o.manifestLoadingTimeOut,d=o.manifestLoadingRetryDelay,c=o.manifestLoadingMaxRetryTimeout):(s=o.levelLoadingMaxRetry,l=o.levelLoadingTimeOut,d=o.levelLoadingRetryDelay,c=o.levelLoadingMaxRetryTimeout,u.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader="undefined"!==typeof o.pLoader?new o.pLoader(o):new o.loader(o),t.url=e,t.responseType="",n={timeout:l,maxRetry:s,retryDelay:d,maxRetryDelay:c},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,n,i)}},{key:"resolve",value:function(e,t){return n.default.buildAbsoluteURL(t,e)}},{key:"parseMasterPlaylist",value:function(e,t){var r=[],a=void 0;for(f.lastIndex=0;null!=(a=f.exec(e));){var n={},i=n.attrs=new l.default(a[1]);n.url=this.resolve(a[2],t);var o=i.decimalResolution("RESOLUTION");o&&(n.width=o.width,n.height=o.height),n.bitrate=i.decimalInteger("AVERAGE-BANDWIDTH")||i.decimalInteger("BANDWIDTH"),n.name=i.NAME;var s=i.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var d=s[u];-1!==d.indexOf("avc1")?n.videoCodec=this.avc1toavcoti(d):n.audioCodec=d}}r.push(n)}return r}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var a=void 0,n=[];for(h.lastIndex=0;null!=(a=h.exec(e));){var i={},o=new l.default(a[1]);o.TYPE===r&&(i.groupId=o["GROUP-ID"],i.name=o.NAME,i.type=r,i.default="YES"===o.DEFAULT,i.autoselect="YES"===o.AUTOSELECT,i.forced="YES"===o.FORCED,o.URI&&(i.url=this.resolve(o.URI,t)),i.lang=o.LANGUAGE,i.name||(i.name=i.lang),n.push(i))}return n}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,r,a){var n,i,o=0,s=0,d={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new g,f=0,h=null,m=new y;for(p.lastIndex=0;null!==(n=p.exec(e));){var b=n[1];if(b){m.duration=parseFloat(b);var E=(" "+n[2]).slice(1);m.title=E||null,m.tagList.push(E?["INF",b,E]:["INF",b])}else if(n[3]){if(!isNaN(m.duration)){var k=o++;m.type=a,m.start=s,m.levelkey=c,m.sn=k,m.level=r,m.cc=f,m.baseurl=t,m.relurl=(" "+n[3]).slice(1),d.fragments.push(m),h=m,s+=m.duration,m=new y}}else if(n[4]){if(m.rawByteRange=(" "+n[4]).slice(1),h){var T=h.byteRangeEndOffset;T&&(m.lastByteRangeEndOffset=T)}}else if(n[5])m.rawProgramDateTime=(" "+n[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]);else{for(n=n[0].match(v),i=1;i<n.length&&void 0===n[i];i++);var _=(" "+n[i+1]).slice(1),S=(" "+n[i+2]).slice(1);switch(n[i]){case"#":m.tagList.push(S?[_,S]:[_]);break;case"PLAYLIST-TYPE":d.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":o=d.startSN=parseInt(_);break;case"TARGETDURATION":d.targetduration=parseFloat(_);break;case"VERSION":d.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":f++,m.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(_);break;case"KEY":var R=_,A=new l.default(R),w=A.enumeratedString("METHOD"),O=A.URI,C=A.hexadecimalInteger("IV");w&&(c=new g,O&&"AES-128"===w&&(c.method=w,c.baseuri=t,c.reluri=O,c.key=null,c.iv=C));break;case"START":var P=_,L=new l.default(P).decimalFloatingPoint("TIME-OFFSET");isNaN(L)||(d.startTimeOffset=L);break;case"MAP":var D=new l.default(_);m.relurl=D.URI,m.rawByteRange=D.BYTERANGE,m.baseurl=t,m.level=r,m.type=a,m.sn="initSegment",d.initSegment=m,m=new y;break;default:u.logger.warn("line parsed but not handled: "+n)}}}return(m=h)&&!m.relurl&&(d.fragments.pop(),s-=m.duration),d.totalduration=s,d.averagetargetduration=s/d.fragments.length,d.endSN=o-1,d}},{key:"loadsuccess",value:function(e,t,r){var a=e.data,n=e.url,o=r.type,l=r.id,d=r.level,c=this.hls;if(this.loaders[o]=void 0,void 0!==n&&0!==n.indexOf("data:")||(n=r.url),t.tload=performance.now(),0===a.indexOf("#EXTM3U"))if(a.indexOf("#EXTINF:")>0){var f="audioTrack"!==o,h=this.parseLevelPlaylist(a,n,(f?d:l)||0,f?"main":"audio");"manifest"===o&&c.trigger(i.default.MANIFEST_LOADED,{levels:[{url:n,details:h}],audioTracks:[],url:n,stats:t}),t.tparsed=performance.now(),h.targetduration?f?c.trigger(i.default.LEVEL_LOADED,{details:h,level:d||0,id:l||0,stats:t}):c.trigger(i.default.AUDIO_TRACK_LOADED,{details:h,id:l,stats:t}):c.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"invalid targetduration"})}else{var p=this.parseMasterPlaylist(a,n);if(p.length){var v=this.parseMasterPlaylistMedia(a,n,"AUDIO");if(v.length){var g=!1;v.forEach((function(e){e.url||(g=!0)})),!1===g&&p[0].audioCodec&&!p[0].attrs.AUDIO&&(u.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main"}))}c.trigger(i.default.MANIFEST_LOADED,{levels:p,audioTracks:v,url:n,stats:t})}else c.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no level found in manifest"})}else c.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var r,a,n=t.loader;switch(t.type){case"manifest":r=s.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case"level":r=s.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case"audioTrack":r=s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:r,fatal:a,url:n.url,loader:n,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var r,a,n=t.loader;switch(t.type){case"manifest":r=s.ErrorDetails.MANIFEST_LOAD_TIMEOUT,a=!0;break;case"level":r=s.ErrorDetails.LEVEL_LOAD_TIMEOUT,a=!1;break;case"audioTrack":r=s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,a=!1}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:r,fatal:a,url:n.url,loader:n,context:t})}}]),t}(o.default);r.default=m},{2:2,26:26,27:27,28:28,40:40,45:45}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"init",value:function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:a};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=i,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),a=8,n=r.length,i=n;n--;)a+=r[n].byteLength;for((t=new Uint8Array(a))[0]=a>>24&255,t[1]=a>>16&255,t[2]=a>>8&255,t[3]=255&a,t.set(e,4),n=0,a=8;n<i;n++)t.set(r[n],a),a+=r[n].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,r){return r*=t,e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,r,a){return e.box(e.types.moof,e.mfhd(t),e.traf(a,r))}},{key:"moov",value:function(t){for(var r=t.length,a=[];r--;)a[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(a).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var r=t.length,a=[];r--;)a[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(a))}},{key:"mvhd",value:function(t,r){r*=t;var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)}},{key:"sdtp",value:function(t){var r,a,n=t.samples||[],i=new Uint8Array(4+n.length);for(a=0;a<n.length;a++)r=n[a].flags,i[a+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,i)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var r,a,n,i=[],o=[];for(r=0;r<t.sps.length;r++)n=(a=t.sps[r]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(a));for(r=0;r<t.pps.length;r++)n=(a=t.pps[r]).byteLength,o.push(n>>>8&255),o.push(255&n),o=o.concat(Array.prototype.slice.call(a));var s=e.box(e.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,d=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var r=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var r=t.audiosamplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var r=t.id,a=t.duration*t.timescale,n=t.width,i=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))}},{key:"traf",value:function(t,r){var a=e.sdtp(t),n=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.trun(t,a.length+16+16+8+16+8+8),a)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,r){var a,n,i,o,s,l,u=t.samples||[],d=u.length,c=12+16*d,f=new Uint8Array(c);for(r+=8+c,f.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),a=0;a<d;a++)i=(n=u[a]).duration,o=n.size,s=n.flags,l=n.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*a);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var r,a=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+a.byteLength)).set(e.FTYP),r.set(a,e.FTYP.byteLength),r}}]),e}();r.default=n},{}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=u(e(29)),i=u(e(28)),o=e(45),s=u(e(37)),l=e(26);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t,r,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.id=r,this.config=a,this.typeSupported=n,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return a(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,a,n,o,s,l,u,d,c){if(this.level=e,this.sn=t,this.ISGenerated||this.generateIS(a,n,l,r),null!==c&&(this._initPTS=this._initDTS=c),this.ISGenerated)if(a.samples.length){var f=this.remuxAudio(a,l,u,d);if(n.samples.length){var h=void 0;f&&(h=f.endPTS-f.startPTS),this.remuxVideo(n,l,u,h)}}else{var p=void 0;n.samples.length&&(p=this.remuxVideo(n,l,u)),p&&a.codec&&this.remuxEmptyAudio(a,l,u,p)}o.samples.length&&this.remuxID3(o,l),s.samples.length&&this.remuxText(s,l),this.observer.trigger(i.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(e,t,r,a){var n,u,d=this.observer,c=e.samples,f=t.samples,h=this.PES_TIMESCALE,p=this.typeSupported,v="audio/mp4",g={},y={id:this.id,level:this.level,sn:this.sn,tracks:g,unique:!1},m=void 0===this._initPTS;m&&(n=u=1/0),e.config&&c.length&&(e.timescale=e.audiosamplerate,e.timescale*e.duration>Math.pow(2,32)&&(e.timescale=e.audiosamplerate/function e(t,r){return r?e(r,t%r):t}(e.audiosamplerate,e.isAAC?1024:1152)),o.logger.log("audio mp4 timescale :"+e.timescale),e.isAAC||(p.mpeg?(v="audio/mpeg",e.codec=""):p.mp3&&(e.codec="mp3")),g.audio={container:v,codec:e.codec,initSegment:!e.isAAC&&p.mpeg?new Uint8Array:s.default.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(n=u=c[0].pts-h*r)),t.sps&&t.pps&&f.length&&(t.timescale=this.MP4_TIMESCALE,g.video={container:"video/mp4",codec:t.codec,initSegment:s.default.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(n=Math.min(n,f[0].pts-h*r),u=Math.min(u,f[0].dts-h*r),this.observer.trigger(i.default.INIT_PTS_FOUND,{id:this.id,initPTS:n,cc:a}))),Object.keys(g).length?(d.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,y),this.ISGenerated=!0,m&&(this._initPTS=n,this._initDTS=u)):d.trigger(i.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,id:this.id,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,a){var n,u,d,c,f,h,p,v=8,g=this.PES_TIMESCALE,y=this.PES2MP4SCALEFACTOR,m=e.samples,b=[],E=m.length,k=this._PTSNormalize,T=this._initDTS;m.sort((function(e,t){var r=e.dts-t.dts;return r||e.pts-t.pts}));var _=m.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(_<0){o.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(_/90)+" ms to overcome this issue");for(var S=0;S<m.length;S++)m[S].dts+=_}var R=void 0;R=r?this.nextAvcDts:t*g;var A=m[0];f=Math.max(k(A.dts-T,R),0),c=Math.max(k(A.pts-T,R),0);var w=Math.round((f-R)/90);r&&w&&(w>1?o.logger.log("AVC:"+w+" ms hole between fragments detected,filling it"):w<-1&&o.logger.log("AVC:"+-w+" ms overlapping between fragments detected"),f=R,m[0].dts=f+T,c=Math.max(c-w,R),m[0].pts=c+T,o.logger.log("Video/PTS/DTS adjusted: "+Math.round(c/90)+"/"+Math.round(f/90)+",delta:"+w+" ms")),A=m[m.length-1],p=Math.max(k(A.dts-T,R),0),h=Math.max(k(A.pts-T,R),0),h=Math.max(h,p);var O=navigator.vendor,C=navigator.userAgent,P=O&&O.indexOf("Apple")>-1&&C&&!C.match("CriOS");P&&(n=Math.round((p-f)/(y*(m.length-1))));for(var L=0;L<E;L++){var D=m[L];P?D.dts=f+L*y*n:(D.dts=Math.max(k(D.dts-T,R),f),D.dts=Math.round(D.dts/y)*y),D.pts=Math.max(k(D.pts-T,R),D.dts),D.pts=Math.round(D.pts/y)*y}var M=e.len+4*e.nbNalu+8;try{u=new Uint8Array(M)}catch(ee){return void this.observer.trigger(i.default.ERROR,{type:l.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:l.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var x=new DataView(u.buffer);x.setUint32(0,M),u.set(s.default.types.mdat,4);for(var I=0;I<E;I++){for(var N=m[I],F=N.units.units,U=0,B=void 0,j=0,G=F.length;j<G;j++){var H=F[j],K=H.data,V=H.data.byteLength;x.setUint32(v,V),v+=4,u.set(K,v),v+=V,U+=4+V}if(P)B=Math.max(0,n*Math.round((N.pts-N.dts)/(y*n)));else{if(I<E-1)n=m[I+1].dts-N.dts;else{var W=this.config,z=N.dts-m[I>0?I-1:I].dts;if(W.stretchShortVideoTrack){var Y=W.maxBufferHole,X=W.maxSeekHole,q=Math.floor(Math.min(Y,X)*g),Z=(a?c+a*g:this.nextAudioPts)-N.pts;Z>q?((n=Z-z)<0&&(n=z),o.logger.log("It is approximately "+Z/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=z}else n=z}n/=y,B=Math.round((N.pts-N.dts)/y)}b.push({size:U,duration:n,cts:B,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=p+n*y;var J=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var $=b[0].flags;$.dependsOn=2,$.isNonSync=0}e.samples=b,d=s.default.moof(e.sequenceNumber++,f/y,e),e.samples=[];var Q={id:this.id,level:this.level,sn:this.sn,data1:d,data2:u,startPTS:c/g,endPTS:(h+y*n)/g,startDTS:f/g,endDTS:this.nextAvcDts/g,type:"video",nb:b.length,dropped:J};return this.observer.trigger(i.default.FRAG_PARSING_DATA,Q),Q}},{key:"remuxAudio",value:function(e,t,r,a){var u,d,c,f,h,p,v,g,y,m,b,E,k,T,_,S=this.PES_TIMESCALE,R=S/e.timescale,A=e.timescale*(e.isAAC?1024:1152)/e.audiosamplerate*R,w=this._PTSNormalize,O=this._initDTS,C=!e.isAAC&&this.typeSupported.mpeg,P=C?0:8,L=[],D=[];if(e.samples.sort((function(e,t){return e.pts-t.pts})),D=e.samples,_=this.nextAudioPts,(r|=D.length&&_&&(Math.abs(t-_/S)<.1||Math.abs(D[0].pts-_-this._initDTS)<20*A))||(_=t*S),a&&e.isAAC)for(var M=0,x=_;M<D.length;){var I=D[M],N=w(I.pts-O,_)-x;if(N<=-A)o.logger.warn("Dropping 1 audio frame @ "+Math.round(x/90)/1e3+"s due to "+Math.round(Math.abs(N/90))+" ms overlap."),D.splice(M,1),e.len-=I.unit.length;else if(N>=A&&x){var F=Math.round(N/A);o.logger.warn("Injecting "+F+" audio frame @ "+Math.round(x/90)/1e3+"s due to "+Math.round(N/90)+" ms gap.");for(var U=0;U<F;U++)T=x+O,T=Math.max(T,O),(k=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),k=I.unit.subarray()),D.splice(M,0,{unit:k,pts:T,dts:T}),e.len+=k.length,x+=A,M+=1;I.pts=I.dts=x+O,x+=A,M+=1}else Math.abs(N),x+=A,I.pts=I.dts=0===M?O+_:D[M-1].pts+A,M+=1}for(var B=0,j=D.length;B<j;B++){if(c=(u=D[B]).unit,y=u.pts-O,m=u.dts-O,void 0!==g)b=w(y,g),E=w(m,g),d.duration=Math.round((E-g)/R);else{b=w(y,_),E=w(m,_);var G=Math.round(1e3*(b-_)/S),H=0;if(r&&e.isAAC&&G){if(G>0)H=Math.round((b-_)/A),o.logger.log(G+" ms hole between AAC samples detected,filling it"),H>0&&((k=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(k=c.subarray()),e.len+=H*k.length);else if(G<-12){o.logger.log(-G+" ms overlapping between AAC samples detected, drop frame"),e.len-=c.byteLength;continue}b=E=_}if(p=Math.max(0,b),v=Math.max(0,E),!(e.len>0))return;var K=C?e.len:e.len+8;try{f=new Uint8Array(K)}catch(q){return void this.observer.trigger(i.default.ERROR,{type:l.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:l.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:K,reason:"fail allocating audio mdat "+K})}C||(new DataView(f.buffer).setUint32(0,K),f.set(s.default.types.mdat,4));for(var V=0;V<H;V++)T=b-(H-V)*A,(k=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),k=c.subarray()),f.set(k,P),P+=k.byteLength,d={size:k.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},L.push(d)}f.set(c,P);var W=c.byteLength;P+=W,d={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},L.push(d),g=E}var z=0,Y=L.length;if(Y>=2&&(z=L[Y-2].duration,d.duration=z),Y){this.nextAudioPts=b+R*z,e.len=0,e.samples=L,h=C?new Uint8Array:s.default.moof(e.sequenceNumber++,v/R,e),e.samples=[];var X={id:this.id,level:this.level,sn:this.sn,data1:h,data2:f,startPTS:p/S,endPTS:this.nextAudioPts/S,startDTS:v/S,endDTS:(E+R*z)/S,type:"audio",nb:Y};return this.observer.trigger(i.default.FRAG_PARSING_DATA,X),X}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,a){var i=this.PES_TIMESCALE,s=i/(e.timescale?e.timescale:e.audiosamplerate),l=this.nextAudioPts,u=(void 0!==l?l:a.startDTS*i)+this._initDTS,d=a.endDTS*i+this._initDTS,c=1024*s,f=Math.ceil((d-u)/c),h=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(o.logger.warn("remux empty Audio"),h){for(var p=[],v=0;v<f;v++){var g=u+v*c;p.push({unit:h,pts:g,dts:g}),e.len+=h.length}e.samples=p,this.remuxAudio(e,t,r)}else o.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e,t){var r,a=e.samples.length;if(a){for(var n=0;n<a;n++)(r=e.samples[n]).pts=(r.pts-this._initPTS)/this.PES_TIMESCALE,r.dts=(r.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(i.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort((function(e,t){return e.pts-t.pts}));var r,a=e.samples.length;if(a){for(var n=0;n<a;n++)(r=e.samples[n]).pts=(r.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(i.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}},{key:"passthrough",get:function(){return!1}}]),e}();r.default=d},{26:26,28:28,29:29,37:37,45:45}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=e(28),o=(a=i)&&a.__esModule?a:{default:a},s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.id=r,this.ISGenerated=!1}return n(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,a,n,i){var s=this.observer;if(!this.ISGenerated){var l={id:this.id,tracks:{},unique:!0},u=t,d=u.codec;d&&(l.tracks.video={container:u.container,codec:d,metadata:{width:u.width,height:u.height}}),(d=(u=e).codec)&&(l.tracks.audio={container:u.container,codec:d,metadata:{channelCount:u.channelCount}}),this.ISGenerated=!0,s.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,l)}s.trigger(o.default.FRAG_PARSING_DATA,{id:this.id,data1:i,startPTS:n,startDTS:n,type:"audiovideo",nb:1,dropped:0})}},{key:"passthrough",get:function(){return!0}}]),e}();r.default=s},{28:28}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,o=function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"===typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}return a(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),a=0;a<t.length/2;a++)r[a]=parseInt(t.slice(2*a,2*a+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=n.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(i.lastIndex=0;null!==(t=i.exec(e));){var a=t[2];0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),r[t[1]]=a}return r}}]),e}();r.default=o},{}],41:[function(e,t,r){"use strict";t.exports={search:function(e,t){for(var r=0,a=e.length-1,n=null,i=null;r<=a;){var o=t(i=e[n=(r+a)/2|0]);if(o>0)r=n+1;else{if(!(o<0))return i;a=n-1}}return null}}},{}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return i.hasOwnProperty(e)&&(t=i[e]),String.fromCharCode(t)},s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},d={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},h=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},p=function(){function e(t,r,a,i,o){n(this,e),this.foreground=t||"white",this.underline=r||!1,this.italics=a||!1,this.background=i||"black",this.flash=o||!1}return a(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var a=t[r];e.hasOwnProperty(a)&&(this[a]=e[a])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),v=function(){function e(t,r,a,i,o,s){n(this,e),this.uchar=t||" ",this.penState=new p(r,a,i,o,s)}return a(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),g=function(){function e(){n(this,e),this.chars=[];for(var t=0;t<32;t++)this.chars.push(new v);this.pos=0,this.currPenState=new p}return a(e,[{key:"equals",value:function(e){for(var t=!0,r=0;r<32;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=32)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=o(e);this.pos>=32?f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,r=0;r<32;r++){var a=this.chars[r].uchar;" "!==a&&(t=!1),e.push(a)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}]),e}(),y=function(){function e(){n(this,e),this.rows=[];for(var t=0;t<15;t++)this.rows.push(new g);this.currRow=14,this.nrRollUpRows=null,this.reset()}return a(e,[{key:"reset",value:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14}},{key:"equals",value:function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){this.rows[this.currRow].backSpace()}},{key:"clearToEndOfRow",value:function(){this.rows[this.currRow].clearToEndOfRow()}},{key:"insertChar",value:function(e){this.rows[this.currRow].insertChar(e)}},{key:"setPen",value:function(e){this.rows[this.currRow].setPenStyles(e)}},{key:"moveCursor",value:function(e){this.rows[this.currRow].moveCursor(e)}},{key:"setCursor",value:function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)}},{key:"setPAC",value:function(e,t){f.log("INFO","pacData = "+JSON.stringify(e));var r=e.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(var a=0;a<15;a++)this.rows[a].clear();var n=this.currRow+1-this.nrRollUpRows,i=t.rows[n].cueStartTime;if(i&&i<f.time)for(a=0;a<this.nrRollUpRows;a++)this.rows[r-this.nrRollUpRows+a+1].copy(t.rows[n+a])}this.currRow=r;var o=this.rows[this.currRow];if(null!==e.indent){var s=e.indent,l=Math.max(s-1,0);o.setCursor(e.indent),e.color=o.chars[l].penState.foreground}var u={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(u)}},{key:"setBkgData",value:function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],r="",a=-1,n=0;n<15;n++){var i=this.rows[n].getTextString();i&&(a=n+1,e?t.push("Row "+a+": '"+i+"'"):t.push(i.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),m=function(){function e(t,r){n(this,e),this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new y,this.nonDisplayedMemory=new y,this.lastOutputScreen=new y,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return a(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e,this.lastOutputScreen)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset(),this.lastOutputScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=f.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),b=function(){function e(t,r,a){n(this,e),this.field=t||1,this.outputs=[r,a],this.channels=[new m(1,r),new m(2,a)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return a(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var r,a,n,i=!1;this.lastTime=e,f.setTime(e);for(var o=0;o<t.length;o+=2)a=127&t[o],n=127&t[o+1],0!==a||0!==n?(f.log("DATA","["+h([t[o],t[o+1]])+"] -> ("+h([a,n])+")"),(r=this.parseCmd(a,n))||(r=this.parseMidrow(a,n)),r||(r=this.parsePAC(a,n)),r||(r=this.parseBackgroundAttributes(a,n)),r||(i=this.parseChars(a,n))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(i):f.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:i?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+h([a,n])+" orig: "+h([t[o],t[o+1]])))):this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var r=null;if(!((20===e||28===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+h([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var a=this.channels[r-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"parseMidrow",value:function(e,t){var r=null;return(17===e||25===e)&&32<=t&&t<=47&&((r=17===e?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+h([e,t])+")"),!0))}},{key:"parsePAC",value:function(e,t){var r,a=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,a=64<=t&&t<=95?1===r?s[e]:u[e]:1===r?l[e]:d[e];var n=this.interpretPAC(a,t);return this.channels[r-1].setPAC(n),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"interpretPAC",value:function(e,t){var r=t,a={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,a.underline=1===(1&r),r<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((r-16)/2),a}},{key:"parseChars",value:function(e,t){var r=null,a=null,n=null;if(e>=25?(r=2,n=e-8):(r=1,n=e),17<=n&&n<=19){var i=t;i=17===n?t+80:18===n?t+112:t+144,f.log("INFO","Special char '"+o(i)+"' in channel "+r),a=[i]}else 32<=e&&e<=127&&(a=0===t?[e]:[e,t]);if(a){var s=h(a);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return a}},{key:"parseBackgroundAttributes",value:function(e,t){var r,a,n;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(a=Math.floor((t-32)/2),r.background=c[a],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),n=e<24?1:2,this.channels[n-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();r.default=b},{}],43:[function(e,t,r){"use strict";var a={newCue:function(e,t,r,a){for(var n,i,o,s,l,u=window.VTTCue||window.TextTrackCue,d=0;d<a.rows.length;d++)if(o=!0,s=0,l="",!(n=a.rows[d]).isEmpty()){for(var c=0;c<n.chars.length;c++)n.chars[c].uchar.match(/\s/)&&o?s++:(l+=n.chars[c].uchar,o=!1);n.cueStartTime=t,i=new u(t,r,l.trim()),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?i.line=d+1:i.line=d>7?d-2:d+1,i.align="left",i.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(i)}}};t.exports=a},{}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return a(e,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();r.default=n},{}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(){}var i={trace:n,debug:n,log:n,warn:n,info:n,error:n},o=i;function s(e,t){return t="["+e+"] > "+t}function l(e){var t=self.console[e];return t?function(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];a[0]&&(a[0]=s(e,a[0])),t.apply(self.console,a)}:n}r.enableLogs=function(e){if(!0===e||"object"===("undefined"===typeof e?"undefined":a(e))){!function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):l(t)}))}(e,"debug","log","info","warn","error");try{o.log()}catch(t){o=i}}else o=i},r.logger=o},{}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"toString",value:function(e){for(var t="",r=e.length,a=0;a<r;a++)t+="["+e.start(a).toFixed(3)+","+e.end(a).toFixed(3)+"]";return t}}]),e}();r.default=n},{}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=e(45),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return a(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;(e="undefined"!==typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest).onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.responseType=t.responseType;var r=this.stats;r.tfirst=0,r.loaded=0,this.xhrSetup&&this.xhrSetup(e,t.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,r=t.readyState,a=this.stats,i=this.context,o=this.config;if(!a.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===a.tfirst&&(a.tfirst=Math.max(performance.now(),a.trequest)),4===r){var s=t.status;if(s>=200&&s<300){a.tload=Math.max(a.tfirst,performance.now());var l=void 0,u=void 0;u="arraybuffer"===i.responseType?(l=t.response).byteLength:(l=t.responseText).length,a.loaded=a.total=u;var d={url:t.responseURL,data:l};this.callbacks.onSuccess(d,a,i)}else a.retry>=o.maxRetry||s>=400&&s<499?(n.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i)):(n.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),a.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},{key:"loadtimeout",value:function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var r=this.callbacks.onProgress;r&&r(t,this.context,null)}}]),e}();r.default=i},{45:45}]},{},[33])(33)},1570:function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var a=r(0),n=r(1),i=r(3),o=r.n(i),s=r(19),l=r(261),u=r(96),d=r(1005),c=r(379),f=r(257),h=r(988);function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var _=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};function S(e,t){return e[t]&&Math.floor(24/e[t])}var R=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(l,e);var t,r,n,i,s=(t=l,function(){var e,r=E(t);if(b()){var a=E(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return m(this,e)});function l(){var e;return g(this,l),(e=s.apply(this,arguments)).renderItem=function(t){var r=t.getPrefixCls,n=e.context,i=n.grid,s=n.itemLayout,l=e.props,u=l.prefixCls,d=l.children,c=l.actions,p=l.extra,g=l.className,y=_(l,["prefixCls","children","actions","extra","className"]),m=r("list",u),b=c&&c.length>0&&a.createElement("ul",{className:"".concat(m,"-item-action"),key:"actions"},c.map((function(e,t){return a.createElement("li",{key:"".concat(m,"-item-action-").concat(t)},e,t!==c.length-1&&a.createElement("em",{className:"".concat(m,"-item-action-split")}))}))),E=i?"div":"li",k=a.createElement(E,T({},y,{className:o()("".concat(m,"-item"),g,v({},"".concat(m,"-item-no-flex"),!e.isFlexMode()))}),"vertical"===s&&p?[a.createElement("div",{className:"".concat(m,"-item-main"),key:"content"},d,b),a.createElement("div",{className:"".concat(m,"-item-extra"),key:"extra"},p)]:[d,b,Object(h.a)(p,{key:"extra"})]);return i?a.createElement(f.a,{span:S(i,"column"),xs:S(i,"xs"),sm:S(i,"sm"),md:S(i,"md"),lg:S(i,"lg"),xl:S(i,"xl"),xxl:S(i,"xxl")},k):k},e}return r=l,(n=[{key:"isItemContainsTextNodeAndNotSingular",value:function(){var e,t=this.props.children;return a.Children.forEach(t,(function(t){"string"===typeof t&&(e=!0)})),e&&a.Children.count(t)>1}},{key:"isFlexMode",value:function(){var e=this.props.extra;return"vertical"===this.context.itemLayout?!!e:!this.isItemContainsTextNodeAndNotSingular()}},{key:"render",value:function(){return a.createElement(u.a,null,this.renderItem)}}])&&y(r.prototype,n),i&&y(r,i),l}(a.Component);function A(e){return(A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t){return!t||"object"!==A(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}R.Meta=function(e){return a.createElement(u.a,null,(function(t){var r=t.getPrefixCls,n=e.prefixCls,i=e.className,s=e.avatar,l=e.title,u=e.description,d=_(e,["prefixCls","className","avatar","title","description"]),c=r("list",n),f=o()("".concat(c,"-item-meta"),i),h=a.createElement("div",{className:"".concat(c,"-item-meta-content")},l&&a.createElement("h4",{className:"".concat(c,"-item-meta-title")},l),u&&a.createElement("div",{className:"".concat(c,"-item-meta-description")},u));return a.createElement("div",T({},d,{className:f}),s&&a.createElement("div",{className:"".concat(c,"-item-meta-avatar")},s),(l||u)&&h)}))},R.contextTypes={grid:n.any,itemLayout:n.string};var N=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},F=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(h,e);var t,r,n,i,f=(t=h,function(){var e,r=x(t);if(M()){var a=x(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return D(this,e)});function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=f.call(this,e)).defaultPaginationProps={current:1,total:0},t.keys={},t.onPaginationChange=t.triggerPaginationEvent("onChange"),t.onPaginationShowSizeChange=t.triggerPaginationEvent("onShowSizeChange"),t.renderItem=function(e,r){var a,n=t.props,i=n.renderItem,o=n.rowKey;return i?((a="function"===typeof o?o(e):"string"===typeof o?e[o]:e.key)||(a="list-item-".concat(r)),t.keys[r]=a,i(e,r)):null},t.renderEmpty=function(e,r){var n=t.props.locale;return a.createElement("div",{className:"".concat(e,"-empty-text")},n&&n.emptyText||r("List"))},t.renderList=function(e){var r,n=e.getPrefixCls,i=e.renderEmpty,u=t.state,f=u.paginationCurrent,h=u.paginationSize,p=t.props,v=p.prefixCls,g=p.bordered,y=p.split,m=p.className,b=p.children,E=p.itemLayout,k=p.loadMore,T=p.pagination,_=p.grid,S=p.dataSource,R=void 0===S?[]:S,A=p.size,O=p.header,L=p.footer,D=p.loading,M=N(p,["prefixCls","bordered","split","className","children","itemLayout","loadMore","pagination","grid","dataSource","size","header","footer","loading"]),x=n("list",v),I=D;"boolean"===typeof I&&(I={spinning:I});var F=I&&I.spinning,U="";switch(A){case"large":U="lg";break;case"small":U="sm"}var B=o()(x,m,(P(r={},"".concat(x,"-vertical"),"vertical"===E),P(r,"".concat(x,"-").concat(U),U),P(r,"".concat(x,"-split"),y),P(r,"".concat(x,"-bordered"),g),P(r,"".concat(x,"-loading"),F),P(r,"".concat(x,"-grid"),_),P(r,"".concat(x,"-something-after-last-item"),t.isSomethingAfterLastItem()),r)),j=C(C(C({},t.defaultPaginationProps),{total:R.length,current:f,pageSize:h}),T||{}),G=Math.ceil(j.total/j.pageSize);j.current>G&&(j.current=G);var H,K=T?a.createElement("div",{className:"".concat(x,"-pagination")},a.createElement(d.a,C({},j,{onChange:t.onPaginationChange,onShowSizeChange:t.onPaginationShowSizeChange}))):null,V=w(R);if(T&&R.length>(j.current-1)*j.pageSize&&(V=w(R).splice((j.current-1)*j.pageSize,j.pageSize)),H=F&&a.createElement("div",{style:{minHeight:53}}),V.length>0){var W=V.map((function(e,r){return t.renderItem(e,r)})),z=[];a.Children.forEach(W,(function(e,r){z.push(a.cloneElement(e,{key:t.keys[r]}))})),H=_?a.createElement(c.a,{gutter:_.gutter},z):a.createElement("ul",{className:"".concat(x,"-items")},z)}else b||F||(H=t.renderEmpty(x,i));var Y=j.position||"bottom";return a.createElement("div",C({className:B},Object(s.a)(M,["rowKey","renderItem","locale"])),("top"===Y||"both"===Y)&&K,O&&a.createElement("div",{className:"".concat(x,"-header")},O),a.createElement(l.a,I,H,b),L&&a.createElement("div",{className:"".concat(x,"-footer")},L),k||("bottom"===Y||"both"===Y)&&K)};var r=e.pagination,n=r&&"object"===A(r)?r:{};return t.state={paginationCurrent:n.defaultCurrent||1,paginationSize:n.defaultPageSize||10},t}return r=h,(n=[{key:"getChildContext",value:function(){return{grid:this.props.grid,itemLayout:this.props.itemLayout}}},{key:"triggerPaginationEvent",value:function(e){var t=this;return function(r,a){var n=t.props.pagination;t.setState({paginationCurrent:r,paginationSize:a}),n&&n[e]&&n[e](r,a)}}},{key:"isSomethingAfterLastItem",value:function(){var e=this.props,t=e.loadMore,r=e.pagination,a=e.footer;return!!(t||r||a)}},{key:"render",value:function(){return a.createElement(u.a,null,this.renderList)}}])&&L(r.prototype,n),i&&L(r,i),h}(a.Component);F.Item=R,F.childContextTypes={grid:n.any,itemLayout:n.string},F.defaultProps={dataSource:[],bordered:!1,split:!0,loading:!1,pagination:!1}},788:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},796:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},797:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}e.exports=function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}},798:function(e,t,r){var a=r(1111);function n(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}},802:function(e,t,r){var a=r(1111),n=r(803);e.exports=function(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?n(e):t}},803:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},804:function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},805:function(e,t,r){var a=r(1549);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}},817:function(e,t,r){"use strict";r(38),r(384)},818:function(e,t,r){"use strict";var a=r(257);t.a=a.a},826:function(e,t,r){"use strict";r(38),r(891),r(892),r(810),r(817)},835:function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var a=r(0),n=r(3),i=r.n(n),o=r(19),s=r(96);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var u=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},d=function(e){return a.createElement(s.a,null,(function(t){var r,n,o,s=t.getPrefixCls,d=e.prefixCls,c=e.className,f=e.hoverable,h=void 0===f||f,p=u(e,["prefixCls","className","hoverable"]),v=s("card",d),g=i()("".concat(v,"-grid"),c,(r={},n="".concat(v,"-grid-hoverable"),o=h,n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r));return a.createElement("div",l({},p,{className:g}))}))};function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var f=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},h=function(e){return a.createElement(s.a,null,(function(t){var r=t.getPrefixCls,n=e.prefixCls,o=e.className,s=e.avatar,l=e.title,u=e.description,d=f(e,["prefixCls","className","avatar","title","description"]),h=r("card",n),p=i()("".concat(h,"-meta"),o),v=s?a.createElement("div",{className:"".concat(h,"-meta-avatar")},s):null,g=l?a.createElement("div",{className:"".concat(h,"-meta-title")},l):null,y=u?a.createElement("div",{className:"".concat(h,"-meta-description")},u):null,m=g||y?a.createElement("div",{className:"".concat(h,"-meta-detail")},g,y):null;return a.createElement("div",c({},d,{className:p}),v,m)}))},p=r(917),v=r(812),g=r(818),y=r(15);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};function O(e){return e.map((function(t,r){return a.createElement("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(r)},a.createElement("span",null,t))}))}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(c,e);var t,r,n,l,u=(t=c,function(){var e,r=R(t);if(S()){var a=R(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function c(){var e;return k(this,c),(e=u.apply(this,arguments)).onTabChange=function(t){e.props.onTabChange&&e.props.onTabChange(t)},e.renderCard=function(t){var r,n,s,l=t.getPrefixCls,u=e.props,d=u.prefixCls,c=u.className,f=u.extra,h=u.headStyle,y=void 0===h?{}:h,m=u.bodyStyle,k=void 0===m?{}:m,T=u.title,_=u.loading,S=u.bordered,R=void 0===S||S,A=u.size,C=void 0===A?"default":A,P=u.type,L=u.cover,D=u.actions,M=u.tabList,x=u.children,I=u.activeTabKey,N=u.defaultActiveTabKey,F=u.tabBarExtraContent,U=w(u,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent"]),B=l("card",d),j=i()(B,c,(E(r={},"".concat(B,"-loading"),_),E(r,"".concat(B,"-bordered"),R),E(r,"".concat(B,"-hoverable"),e.getCompatibleHoverable()),E(r,"".concat(B,"-contain-grid"),e.isContainGrid()),E(r,"".concat(B,"-contain-tabs"),M&&M.length),E(r,"".concat(B,"-").concat(C),"default"!==C),E(r,"".concat(B,"-type-").concat(P),!!P),r)),G=0===k.padding||"0px"===k.padding?{padding:24}:void 0,H=a.createElement("div",{className:"".concat(B,"-loading-content"),style:G},a.createElement(v.a,{gutter:8},a.createElement(g.a,{span:22},a.createElement("div",{className:"".concat(B,"-loading-block")}))),a.createElement(v.a,{gutter:8},a.createElement(g.a,{span:8},a.createElement("div",{className:"".concat(B,"-loading-block")})),a.createElement(g.a,{span:15},a.createElement("div",{className:"".concat(B,"-loading-block")}))),a.createElement(v.a,{gutter:8},a.createElement(g.a,{span:6},a.createElement("div",{className:"".concat(B,"-loading-block")})),a.createElement(g.a,{span:18},a.createElement("div",{className:"".concat(B,"-loading-block")}))),a.createElement(v.a,{gutter:8},a.createElement(g.a,{span:13},a.createElement("div",{className:"".concat(B,"-loading-block")})),a.createElement(g.a,{span:9},a.createElement("div",{className:"".concat(B,"-loading-block")}))),a.createElement(v.a,{gutter:8},a.createElement(g.a,{span:4},a.createElement("div",{className:"".concat(B,"-loading-block")})),a.createElement(g.a,{span:3},a.createElement("div",{className:"".concat(B,"-loading-block")})),a.createElement(g.a,{span:16},a.createElement("div",{className:"".concat(B,"-loading-block")})))),K=void 0!==I,V=(E(n={},K?"activeKey":"defaultActiveKey",K?I:N),E(n,"tabBarExtraContent",F),n),W=M&&M.length?a.createElement(p.a,b({},V,{className:"".concat(B,"-head-tabs"),size:"large",onChange:e.onTabChange}),M.map((function(e){return a.createElement(p.a.TabPane,{tab:e.tab,disabled:e.disabled,key:e.key})}))):null;(T||f||W)&&(s=a.createElement("div",{className:"".concat(B,"-head"),style:y},a.createElement("div",{className:"".concat(B,"-head-wrapper")},T&&a.createElement("div",{className:"".concat(B,"-head-title")},T),f&&a.createElement("div",{className:"".concat(B,"-extra")},f)),W));var z=L?a.createElement("div",{className:"".concat(B,"-cover")},L):null,Y=a.createElement("div",{className:"".concat(B,"-body"),style:k},_?H:x),X=D&&D.length?a.createElement("ul",{className:"".concat(B,"-actions")},O(D)):null,q=Object(o.a)(U,["onTabChange","noHovering","hoverable"]);return a.createElement("div",b({},q,{className:j}),s,z,Y,X)},e}return r=c,(n=[{key:"componentDidMount",value:function(){"noHovering"in this.props&&(Object(y.a)(!this.props.noHovering,"Card","`noHovering` is deprecated, you can remove it safely or use `hoverable` instead."),Object(y.a)(!!this.props.noHovering,"Card","`noHovering={false}` is deprecated, use `hoverable` instead."))}},{key:"getCompatibleHoverable",value:function(){var e=this.props,t=e.noHovering,r=e.hoverable;return"noHovering"in this.props?!t||r:!!r}},{key:"isContainGrid",value:function(){var e;return a.Children.forEach(this.props.children,(function(t){t&&t.type&&t.type===d&&(e=!0)})),e}},{key:"render",value:function(){return a.createElement(s.a,null,this.renderCard)}}])&&T(r.prototype,n),l&&T(r,l),c}(a.Component);C.Grid=d,C.Meta=h},843:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.formatTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=Math.floor(e%60),a=Math.floor(e/60%60),n=Math.floor(e/3600),i=Math.floor(t/60%60),o=Math.floor(t/3600);(l(e)||e===1/0)&&(n="-",a="-",r="-");return n=n>0||o>0?"".concat(n,":"):"",a="".concat((n||i>=10)&&a<10?"0".concat(a):a,":"),r=r<10?"0".concat(r):r,n+a+r},t.isVideoChild=function(e){if(e.props&&e.props.isVideoChild)return!0;return"source"===e.type||"track"===e.type},t.mergeAndSortChildren=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=s.default.Children.toArray(t),l=(r.order,(0,o.default)(r,["order"]));return n.filter((function(e){return!e.props.disabled})).concat(e.filter((function(e){return!u(n,(function(t){return d(t,e)}))}))).map((function(t){var r=u(e,(function(e){return d(e,t)})),a=r?r.props:{},n=(0,i.default)({},l,a,t.props);return s.default.cloneElement(t,n,t.props.children)})).sort((function(e,t){return(e.props.order||a)-(t.props.order||a)}))},t.deprecatedWarning=function(e,t){console.warn("WARNING: ".concat(e," will be deprecated soon! Please use ").concat(t," instead."))},t.throttle=function(e,t){var r=arguments,a=!1;return function(){a||(e.apply(void 0,(0,n.default)(r)),a=!0,setTimeout((function(){a=!1}),t))}},t.mediaProperties=void 0;var n=a(r(1118)),i=a(r(857)),o=a(r(995)),s=a(r(0)),l=Number.isNaN||function(e){return e!==e};var u=function(e,t){return e.filter(t)[0]},d=function(e,t){var r=e.type,a=t.type;return"string"===typeof r||"string"===typeof a?r===a:"function"===typeof r&&"function"===typeof a&&r.displayName===a.displayName};t.mediaProperties=["error","src","srcObject","currentSrc","crossOrigin","networkState","preload","buffered","readyState","seeking","currentTime","duration","paused","defaultPlaybackRate","playbackRate","played","seekable","ended","autoplay","loop","mediaGroup","controller","controls","volume","muted","defaultMuted","audioTracks","videoTracks","textTracks","width","height","videoWidth","videoHeight","poster"]},857:function(e,t,r){var a=r(994);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}},891:function(e,t,r){},916:function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},r.apply(this,arguments)}e.exports=r},941:function(e,t,r){"use strict";var a=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.handleFullscreenChange=function(e){return{type:"video-react/FULLSCREEN_CHANGE",isFullscreen:e}},t.activate=function(e){return{type:"video-react/PLAYER_ACTIVATE",activity:e}},t.userActivate=function(e){return{type:"video-react/USER_ACTIVATE",activity:e}},t.play=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"play",source:""};return this.video.play(),{type:i,operation:e}},t.pause=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"pause",source:""};return this.video.pause(),{type:i,operation:e}},t.togglePlay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"toggle-play",source:""};return this.video.togglePlay(),{type:i,operation:e}},t.seek=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"seek",source:""};return this.video.seek(e),{type:i,operation:t}},t.forward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"forward-".concat(e),source:""};return this.video.forward(e),{type:i,operation:t}},t.replay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"replay-".concat(e),source:""};return this.video.replay(e),{type:i,operation:t}},t.changeRate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"change-rate",source:""};return this.video.playbackRate=e,{type:i,operation:t}},t.changeVolume=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"change-volume",source:""},r=e;e<0&&(r=0);e>1&&(r=1);return this.video.volume=r,{type:i,operation:t}},t.mute=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:e?"muted":"unmuted",source:""};return this.video.muted=e,{type:i,operation:t}},t.toggleFullscreen=function(e){if(n.default.enabled)return n.default.isFullscreen?n.default.exit():n.default.request(this.rootElement),{type:i,operation:{action:"toggle-fullscreen",source:""}};return{type:"video-react/FULLSCREEN_CHANGE",isFullscreen:!e.isFullscreen}},t.USER_ACTIVATE=t.PLAYER_ACTIVATE=t.FULLSCREEN_CHANGE=t.OPERATE=void 0;var n=a(r(1113)),i="video-react/OPERATE";t.OPERATE=i;t.FULLSCREEN_CHANGE="video-react/FULLSCREEN_CHANGE";t.PLAYER_ACTIVATE="video-react/PLAYER_ACTIVATE";t.USER_ACTIVATE="video-react/USER_ACTIVATE"},942:function(e,t,r){"use strict";function a(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var r=document,a=r.body,n=r.documentElement,i=n.clientLeft||a.clientLeft||0,o=window.pageXOffset||a.scrollLeft,s=t.left+o-i,l=n.clientTop||a.clientTop||0,u=window.pageYOffset||a.scrollTop,d=t.top+u-l;return{left:Math.round(s),top:Math.round(d)}}Object.defineProperty(t,"__esModule",{value:!0}),t.findElPosition=a,t.getPointerPosition=function(e,t){var r={},n=a(e),i=e.offsetWidth,o=e.offsetHeight,s=n.top,l=n.left,u=t.pageY,d=t.pageX;t.changedTouches&&(d=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY);return r.y=Math.max(0,Math.min(1,(s-u+o)/o)),r.x=Math.max(0,Math.min(1,(d-l)/i)),r},t.blurNode=function(e){e&&e.blur&&e.blur()},t.focusNode=function(e){e&&e.focus&&e.focus()},t.hasClass=function(e,t){for(var r=e.className.split(" "),a=0;a<r.length;a++)if(r[a].toLowerCase()===t.toLowerCase())return!0;return!1}},986:function(e,t,r){"use strict";r(38),r(987)},987:function(e,t,r){},988:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(0);function n(e){if(!a.isValidElement(e))return e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return a.cloneElement.apply(a,[e].concat(r))}},989:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var a=r(0),n=r(268),i=r(96),o=r(15);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(m,e);var t,r,s,g,y=(t=m,function(){var e,r=h(t);if(f()){var a=h(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return c(this,e)});function m(){var e;return u(this,m),(e=y.apply(this,arguments)).saveTooltip=function(t){e.tooltip=t},e.renderPopover=function(t){var r=t.getPrefixCls,i=e.props,o=i.prefixCls,s=v(i,["prefixCls"]);delete s.title;var u=r("popover",o);return a.createElement(n.a,l({},s,{prefixCls:u,ref:e.saveTooltip,overlay:e.getOverlay(u)}))},e}return r=m,(s=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"getOverlay",value:function(e){var t=this.props,r=t.title,n=t.content;return Object(o.a)(!("overlay"in this.props),"Popover","`overlay` is removed, please use `content` instead, see: https://u.ant.design/popover-content"),a.createElement("div",null,r&&a.createElement("div",{className:"".concat(e,"-title")},r),a.createElement("div",{className:"".concat(e,"-inner-content")},n))}},{key:"render",value:function(){return a.createElement(i.a,null,this.renderPopover)}}])&&d(r.prototype,s),g&&d(r,g),m}(a.Component);g.defaultProps={placement:"top",transitionName:"zoom-big",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}}},994:function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},995:function(e,t,r){var a=r(1548);e.exports=function(e,t){if(null==e)return{};var r,n,i=a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},996:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleLoadStart=function(e){return{type:"video-react/LOAD_START",videoProps:e}},t.handleCanPlay=function(e){return{type:"video-react/CAN_PLAY",videoProps:e}},t.handleWaiting=function(e){return{type:"video-react/WAITING",videoProps:e}},t.handleCanPlayThrough=function(e){return{type:"video-react/CAN_PLAY_THROUGH",videoProps:e}},t.handlePlaying=function(e){return{type:"video-react/PLAYING",videoProps:e}},t.handlePlay=function(e){return{type:a,videoProps:e}},t.handlePause=function(e){return{type:n,videoProps:e}},t.handleEnd=function(e){return{type:i,videoProps:e}},t.handleSeeking=function(e){return{type:"video-react/SEEKING",videoProps:e}},t.handleSeeked=function(e){return{type:"video-react/SEEKED",videoProps:e}},t.handleDurationChange=function(e){return{type:"video-react/DURATION_CHANGE",videoProps:e}},t.handleTimeUpdate=function(e){return{type:"video-react/TIME_UPDATE",videoProps:e}},t.handleVolumeChange=function(e){return{type:"video-react/VOLUME_CHANGE",videoProps:e}},t.handleProgressChange=function(e){return{type:"video-react/PROGRESS_CHANGE",videoProps:e}},t.handleRateChange=function(e){return{type:"video-react/RATE_CHANGE",videoProps:e}},t.handleSuspend=function(e){return{type:"video-react/SUSPEND",videoProps:e}},t.handleAbort=function(e){return{type:o,videoProps:e}},t.handleEmptied=function(e){return{type:"video-react/EMPTIED",videoProps:e}},t.handleStalled=function(e){return{type:"video-react/STALLED",videoProps:e}},t.handleLoadedMetaData=function(e){return{type:"video-react/LOADED_META_DATA",videoProps:e}},t.handleLoadedData=function(e){return{type:"video-react/LOADED_DATA",videoProps:e}},t.handleResize=function(e){return{type:"video-react/RESIZE",videoProps:e}},t.handleError=function(e){return{type:s,videoProps:e}},t.handleSeekingTime=function(e){return{type:"video-react/SEEKING_TIME",time:e}},t.handleEndSeeking=function(e){return{type:"video-react/END_SEEKING",time:e}},t.activateTextTrack=function(e){return{type:"video-react/ACTIVATE_TEXT_TRACK",textTrack:e}},t.ACTIVATE_TEXT_TRACK=t.ERROR=t.RESIZE=t.LOADED_DATA=t.LOADED_META_DATA=t.STALLED=t.EMPTIED=t.ABORT=t.SUSPEND=t.RATE_CHANGE=t.PROGRESS_CHANGE=t.VOLUME_CHANGE=t.TIME_UPDATE=t.DURATION_CHANGE=t.END_SEEKING=t.SEEKING_TIME=t.SEEKED=t.SEEKING=t.END=t.PAUSE=t.PLAY=t.PLAYING=t.CAN_PLAY_THROUGH=t.WAITING=t.CAN_PLAY=t.LOAD_START=void 0;t.LOAD_START="video-react/LOAD_START";t.CAN_PLAY="video-react/CAN_PLAY";t.WAITING="video-react/WAITING";t.CAN_PLAY_THROUGH="video-react/CAN_PLAY_THROUGH";t.PLAYING="video-react/PLAYING";var a="video-react/PLAY";t.PLAY=a;var n="video-react/PAUSE";t.PAUSE=n;var i="video-react/END";t.END=i;t.SEEKING="video-react/SEEKING";t.SEEKED="video-react/SEEKED";t.SEEKING_TIME="video-react/SEEKING_TIME";t.END_SEEKING="video-react/END_SEEKING";t.DURATION_CHANGE="video-react/DURATION_CHANGE";t.TIME_UPDATE="video-react/TIME_UPDATE";t.VOLUME_CHANGE="video-react/VOLUME_CHANGE";t.PROGRESS_CHANGE="video-react/PROGRESS_CHANGE";t.RATE_CHANGE="video-react/RATE_CHANGE";t.SUSPEND="video-react/SUSPEND";var o="video-react/ABORT";t.ABORT=o;t.EMPTIED="video-react/EMPTIED";t.STALLED="video-react/STALLED";t.LOADED_META_DATA="video-react/LOADED_META_DATA";t.LOADED_DATA="video-react/LOADED_DATA";t.RESIZE="video-react/RESIZE";var s="video-react/ERROR";t.ERROR=s;t.ACTIVATE_TEXT_TRACK="video-react/ACTIVATE_TEXT_TRACK"},997:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p=a(r(942)),v={className:c.default.string,onMouseDown:c.default.func,onMouseMove:c.default.func,stepForward:c.default.func,stepBack:c.default.func,sliderActive:c.default.func,sliderInactive:c.default.func,onMouseUp:c.default.func,onFocus:c.default.func,onBlur:c.default.func,onClick:c.default.func,getPercent:c.default.func,vertical:c.default.bool,children:c.default.node,label:c.default.string,valuenow:c.default.string,valuetext:c.default.string},g=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleMouseDown=a.handleMouseDown.bind((0,u.default)(a)),a.handleMouseMove=a.handleMouseMove.bind((0,u.default)(a)),a.handleMouseUp=a.handleMouseUp.bind((0,u.default)(a)),a.handleFocus=a.handleFocus.bind((0,u.default)(a)),a.handleBlur=a.handleBlur.bind((0,u.default)(a)),a.handleClick=a.handleClick.bind((0,u.default)(a)),a.handleKeyPress=a.handleKeyPress.bind((0,u.default)(a)),a.stepForward=a.stepForward.bind((0,u.default)(a)),a.stepBack=a.stepBack.bind((0,u.default)(a)),a.calculateDistance=a.calculateDistance.bind((0,u.default)(a)),a.getProgress=a.getProgress.bind((0,u.default)(a)),a.renderChildren=a.renderChildren.bind((0,u.default)(a)),a.state={active:!1},a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUp,!0),document.removeEventListener("touchmove",this.handleMouseMove,!0),document.removeEventListener("touchend",this.handleMouseUp,!0),document.removeEventListener("keydown",this.handleKeyPress,!0)}},{key:"getProgress",value:function(){var e=this.props.getPercent;if(!e)return 0;var t=e();return("number"!==typeof t||t<0||t===1/0)&&(t=0),t}},{key:"handleMouseDown",value:function(e){var t=this.props.onMouseDown;document.addEventListener("mousemove",this.handleMouseMove,!0),document.addEventListener("mouseup",this.handleMouseUp,!0),document.addEventListener("touchmove",this.handleMouseMove,!0),document.addEventListener("touchend",this.handleMouseUp,!0),this.setState({active:!0}),this.props.sliderActive&&this.props.sliderActive(e),this.handleMouseMove(e),t&&t(e)}},{key:"handleMouseMove",value:function(e){var t=this.props.onMouseMove;t&&t(e)}},{key:"handleMouseUp",value:function(e){e.preventDefault();var t=this.props.onMouseUp;document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUp,!0),document.removeEventListener("touchmove",this.handleMouseMove,!0),document.removeEventListener("touchend",this.handleMouseUp,!0),this.setState({active:!1}),this.props.sliderInactive&&this.props.sliderInactive(e),t&&t(e)}},{key:"handleFocus",value:function(e){document.addEventListener("keydown",this.handleKeyPress,!0),this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){document.removeEventListener("keydown",this.handleKeyPress,!0),this.props.onBlur&&this.props.onBlur(e)}},{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick&&this.props.onClick(e)}},{key:"handleKeyPress",value:function(e){37===e.which||40===e.which?(e.preventDefault(),e.stopPropagation(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),e.stopPropagation(),this.stepForward())}},{key:"stepForward",value:function(){this.props.stepForward&&this.props.stepForward()}},{key:"stepBack",value:function(){this.props.stepBack&&this.props.stepBack()}},{key:"calculateDistance",value:function(e){var t=this.slider,r=p.getPointerPosition(t,e);return this.props.vertical?r.y:r.x}},{key:"renderChildren",value:function(){var e=this.getProgress(),t="".concat((100*e).toFixed(2),"%");return f.default.Children.map(this.props.children,(function(r){return f.default.cloneElement(r,{progress:e,percentage:t})}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.vertical,a=t.label,n=t.valuenow,i=t.valuetext;return f.default.createElement("div",{className:(0,h.default)(this.props.className,{"video-react-slider-vertical":r,"video-react-slider-horizontal":!r,"video-react-sliding":this.state.active},"video-react-slider"),ref:function(t){e.slider=t},tabIndex:"0",role:"slider",onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,"aria-label":a||"","aria-valuenow":n||"","aria-valuetext":i||"","aria-valuemin":0,"aria-valuemax":100},this.renderChildren())}}]),t}(f.Component);t.default=g,g.propTypes=v,g.displayName="Slider"},998:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p=n(r(999)),v={player:c.default.object,actions:c.default.object,rates:c.default.array,className:c.default.string},g=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleSelectItem=a.handleSelectItem.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"handleSelectItem",value:function(e){var t=this.props,r=t.rates,a=t.actions;e>=0&&e<r.length&&a.changeRate(r[e])}},{key:"render",value:function(){var e=this.props,t=e.rates,r=e.player,a=t.map((function(e){return{label:"".concat(e,"x"),value:e}})),n=t.indexOf(r.playbackRate)||0;return f.default.createElement(p.default,{className:(0,h.default)("video-react-playback-rate",this.props.className),onSelectItem:this.handleSelectItem,items:a,selectedIndex:n},f.default.createElement("span",{className:"video-react-control-text"},"Playback Rate"),f.default.createElement("div",{className:"video-react-playback-rate-value"},"".concat(r.playbackRate.toFixed(2),"x")))}}]),t}(f.Component);g.propTypes=v,g.defaultProps={rates:[2,1.5,1.25,1,.5,.25]},g.displayName="PlaybackRateMenuButton";var y=g;t.default=y},999:function(e,t,r){"use strict";var a=r(798),n=r(788);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(796)),o=n(r(797)),s=n(r(802)),l=n(r(804)),u=n(r(803)),d=n(r(805)),c=n(r(1)),f=a(r(0)),h=n(r(3)),p=n(r(1561)),v=n(r(1562)),g=n(r(1138)),y={inline:c.default.bool,items:c.default.array,className:c.default.string,onSelectItem:c.default.func,children:c.default.any,selectedIndex:c.default.number},m=function(e){function t(e,r){var a;return(0,i.default)(this,t),(a=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).state={active:!1,activateIndex:e.selectedIndex||0},a.commitSelection=a.commitSelection.bind((0,u.default)(a)),a.activateMenuItem=a.activateMenuItem.bind((0,u.default)(a)),a.handleClick=a.handleClick.bind((0,u.default)(a)),a.renderMenu=a.renderMenu.bind((0,u.default)(a)),a.handleFocus=a.handleFocus.bind((0,u.default)(a)),a.handleBlur=a.handleBlur.bind((0,u.default)(a)),a.handleUpArrow=a.handleUpArrow.bind((0,u.default)(a)),a.handleDownArrow=a.handleDownArrow.bind((0,u.default)(a)),a.handleEscape=a.handleEscape.bind((0,u.default)(a)),a.handleReturn=a.handleReturn.bind((0,u.default)(a)),a.handleTab=a.handleTab.bind((0,u.default)(a)),a.handleKeyPress=a.handleKeyPress.bind((0,u.default)(a)),a.handleSelectItem=a.handleSelectItem.bind((0,u.default)(a)),a.handleIndexChange=a.handleIndexChange.bind((0,u.default)(a)),a}return(0,d.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(e){e.selectedIndex!==this.props.selectedIndex&&this.activateMenuItem(this.props.selectedIndex)}},{key:"commitSelection",value:function(e){this.setState({activateIndex:e}),this.handleIndexChange(e)}},{key:"activateMenuItem",value:function(e){this.setState({activateIndex:e}),this.handleIndexChange(e)}},{key:"handleIndexChange",value:function(e){(0,this.props.onSelectItem)(e)}},{key:"handleClick",value:function(){this.setState((function(e){return{active:!e.active}}))}},{key:"handleFocus",value:function(){document.addEventListener("keydown",this.handleKeyPress)}},{key:"handleBlur",value:function(){this.setState({active:!1}),document.removeEventListener("keydown",this.handleKeyPress)}},{key:"handleUpArrow",value:function(e){var t=this.props.items;if(this.state.active){e.preventDefault();var r=this.state.activateIndex-1;r<0&&(r=t.length?t.length-1:0),this.activateMenuItem(r)}}},{key:"handleDownArrow",value:function(e){var t=this.props.items;if(this.state.active){e.preventDefault();var r=this.state.activateIndex+1;r>=t.length&&(r=0),this.activateMenuItem(r)}}},{key:"handleTab",value:function(e){this.state.active&&(e.preventDefault(),this.commitSelection(this.state.activateIndex))}},{key:"handleReturn",value:function(e){e.preventDefault(),this.state.active?this.commitSelection(this.state.activateIndex):this.setState({active:!0})}},{key:"handleEscape",value:function(){this.setState({active:!1,activateIndex:0})}},{key:"handleKeyPress",value:function(e){27===e.which?this.handleEscape(e):9===e.which?this.handleTab(e):13===e.which?this.handleReturn(e):38===e.which?this.handleUpArrow(e):40===e.which&&this.handleDownArrow(e)}},{key:"handleSelectItem",value:function(e){this.commitSelection(e)}},{key:"renderMenu",value:function(){var e=this;if(!this.state.active)return null;var t=this.props.items;return f.default.createElement(p.default,null,t.map((function(t,r){return f.default.createElement(v.default,{item:t,index:r,onSelectItem:e.handleSelectItem,activateIndex:e.state.activateIndex,key:"item-".concat(r++)})})))}},{key:"render",value:function(){var e=this,t=this.props,r=t.inline,a=t.className;return f.default.createElement(g.default,{className:(0,h.default)(a,{"video-react-menu-button-inline":!!r,"video-react-menu-button-popup":!r,"video-react-menu-button-active":this.state.active},"video-react-control video-react-button video-react-menu-button"),role:"button",tabIndex:"0",ref:function(t){e.menuButton=t},onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur},this.props.children,this.renderMenu())}}]),t}(f.Component);t.default=m,m.propTypes=y,m.displayName="MenuButton"}}]);
//# sourceMappingURL=10.dd8d980a.chunk.js.map